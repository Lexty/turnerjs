<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            margin:  0;
        }
        div, span ,a{
            white-space: nowrap
        }
    </style>
</head>

<body>
<div id="disqus_thread"></div>

<script type="text/javascript">

    var params = [];

    function notifyParent(data) {
        data.id = params.compId;
        window.parent.postMessage(JSON.stringify(data), "*");
    }

    (function() {
        var query = window.location.search.substring(1).split("&"),
            disqusThread,
            previousValue = null;

        for (var i = 0, length = query.length; i < length; i++) {
            var pair = query[i].split("=");
            params[pair[0]] = decodeURIComponent(pair[1]);
        }

        if (!params.disqusId) {
            return;
        }

        disqusThread = document.getElementById('disqus_thread');

        setInterval(function () {
            if (disqusThread.offsetHeight !== previousValue) {
                var bodyHeight = disqusThread.offsetHeight;
                notifyParent({height: bodyHeight});
                previousValue = bodyHeight;
            }
        }, 300);

    }());
</script>
<script>

    var disqus_shortname = params.disqusId;
    var disqus_config = function () {
        this.page.url = params.pageUrl;
        this.page.identifier = params.disqusInstanceId;
        this.page.title =  params.pageTitle;
    };

    (function() {
        var d = document, s = d.createElement('script');

        s.src = '//'+ disqus_shortname +'.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

</body>
</html>