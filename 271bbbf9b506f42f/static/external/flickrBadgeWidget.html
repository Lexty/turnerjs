<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script>

        var urlParams = getUrlParams();

        function getUrlParams() {
            var query = location.search.substring(1),
                    queryPairs = query.split('&'),
                    queryPair,
                    i,
                    params = {};

            for (i = 0; i < queryPairs.length; i++) {
                queryPair = queryPairs[i].split('=');
                if(queryPair[1]){
                    params[decodeURIComponent(queryPair[0])] = decodeURIComponent(queryPair[1]);
                }
            }

            return params;
        }

        function initFlickrScript(){
            var script = document.createElement('script'),
                table = document.getElementById('flickr_badge_wrapper');

            var dw = document.write;
            document.write = function(text){
                table.innerHTML = text;
            }
            script.setAttribute('src',getScripSrc());
            script.onload = function(){
                var wrapper = document.getElementById("flickr_badge_uber_wrapper");
                window.parent.postMessage({compId: urlParams.compId, size: {width: wrapper.clientWidth, height: wrapper.clientHeight}}, decodeURIComponent(urlParams.origin));
            };
            table.appendChild(script);
        }

        function getScripSrc(){
            var tagParam = urlParams.tag ? '&tag=' + urlParams.tag : '',
                source = urlParams.tag ? 'user_tag' : 'user';

            return 'https://www.flickr.com/badge_code_v2.gne?show_name=1&count=' + urlParams.imageCount + '&display=' + urlParams.whichImages + '&size=' + urlParams.imageSize + '&layout=' + urlParams.layoutOrientation + '&source=' + source + '&user=' + urlParams.userId + tagParam;
        }

    </script>
    <style type="text/css">
        #flickr_badge_source_txt {padding:0; font: 11px Arial, Helvetica, Sans serif; color:#666666;}
        #flickr_badge_source_txt {padding:0; font: 11px Arial, Helvetica, Sans serif; color:#666666;}
        #flickr_badge_icon {display:block !important; margin:0 !important; border: 1px solid rgb(0, 0, 0) !important;}
        #flickr_icon_td {padding:0 5px 0 0 !important;}
        .flickr_badge_image {text-align:center !important;}
        .flickr_badge_image img {border: 1px solid black !important;}
        #flickr_badge_uber_wrapper {width:150px;}
        #flickr_www {display:block; text-align:center; padding:0 10px 0 10px !important; font: 11px Arial, Helvetica, Sans serif !important; color:#3993ff !important;}
        #flickr_badge_uber_wrapper a:hover,
        #flickr_badge_uber_wrapper a:link,
        #flickr_badge_uber_wrapper a:active,
        #flickr_badge_uber_wrapper a:visited {text-decoration:none !important; background:inherit !important;}
        /*#flickr_badge_wrapper {opacity: ' + this._backgroundAlpha + ';background-color: ' + this._backgroundColor + ';border: solid 1px ' + this._borderColor + '}*/

        #flickr_badge_source {padding:0 !important; font: 11px Arial, Helvetica, Sans serif !important; }
        body {overflow: hidden;}
        img {display: block; margin: 0 auto;}
        td {padding:0;}

    </style>
</head>
<body>
<table id="flickr_badge_uber_wrapper" cellpadding="0" cellspacing="10" border="0">
    <tr>
        <td>
            <a href="http://www.flickr.com" id="flickr_www">www.<strong style="color:#3993ff">flick<span style="color:#ff1c92">r</span></strong>.com</a>
            <table cellpadding="0" cellspacing="10" border="0" id="flickr_badge_wrapper">
                <script>
                    initFlickrScript();
                </script>
            </table>
        </td>
    </tr>
</table>
</body>
</html>