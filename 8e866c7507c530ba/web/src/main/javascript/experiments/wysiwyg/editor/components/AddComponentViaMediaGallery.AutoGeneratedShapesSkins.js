define.experiment.Class('wysiwyg.editor.components.AddComponentViaMediaGallery.AutoGeneratedShapesSkins', function (def, strategy) {

    def.methods({
        _addComponent: function (preset) {
            this.resources.W.CommandsNew.executeCommand("WEditorCommands.AddComponent", preset);
        },
        _addComponentFromRawData: function (rawData) {
            var preset = this._strategy.getDefaultPreset();
            var data =   this._strategy.extractMediaGalleryData(rawData);
            var layout = this._strategy.computeLayout(rawData);

            _.extend(preset.compData.data, data);
            _.extend(preset.compData.layout, layout);

            if (typeof this._strategy.applyToPreset === "function") {
                this._strategy.applyToPreset(preset, this._addComponent.bind(this));

                if (this._strategy.applyToPreset.length === 2) { // has async callback
                    return;
                }
            }

            this._addComponent(preset);
        }
    });
});
