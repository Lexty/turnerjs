define.experiment.Class('wysiwyg.editor.components.addviamediagallery.ShapeStrategy.AutoGeneratedShapesSkins', function (def, strategy) {

    def.resources(['W.Skins']);

    def.traits(['wysiwyg.common.components.traits.SvgShapeNameHelper']);

    def.methods({
        extractMediaGalleryData: function (rawShapeData) {
            this._fileName = rawShapeData ? rawShapeData.fileName : '';

            if (!this._isValidFileName(this._fileName)) {
                console.error('invalid shape data received from media gallery: ', rawShapeData);
            }

            return { width: 1, height: 1 };
        },
        applyToPreset: function (preset, callback) {
            var compResources = this.resources.W;
            var skinName = this._getSkinNameFromFileName(this._fileName);

            compResources.Skins.getSkin(skinName, function () {
                preset.compData.skin = skinName;
                preset.compData.styleData.skin = skinName;

                if (typeof callback === 'function') {
                    callback(preset);
                }
            });
        },
        _getSkinNameFromFileName: strategy.remove() //trait version is used instead
    });
});
