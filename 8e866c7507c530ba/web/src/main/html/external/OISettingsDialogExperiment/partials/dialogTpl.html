<div class="wrap">
	<div class="main popup">
		<header class="popup-header">
			<h1 translate>ORGANIZE_IMAGES_DIALOG_TITLE</h1>
			<i class="icon-help" ng-click="openHelpDialog()"></i>
			<a class="close" 
               bi-event="ORGIMAGES_CLICK_CLOSE" 
               ng-click="save()">
				<i></i>
			</a>
		</header>
		<section class="popup-content">
			<preview-img 
                    selected-img="selectedImg" 
                    preview="preview">
			</preview-img>
			<div class="imageList">
				<p translate class="description">ORGANIZE_IMAGES_DIALOG_DESC</p>
                <fieldset>
                    <button
                            translate
                            tabindex="2"
                            class="orange add"
                            bi-event="ORGIMAGES_CLICK_ADD_IMAGES"
                            ng-click="openMediaGallery($event)">
                        ORGANIZE_IMAGES_DIALOG_ADD
                    </button>

                    <i class="settings" ng-click="toggleSettings()"></i>
                </fieldset>

				<div class="content">
					<image-list 
                            preview="preview" 
                            remove-image="removeImage" 
                            show-peek="showPeek" 
                            hide-peek="hidePeek"
                            selected-img="selectedImg" 
                            confirm="confirm">
                    </image-list>
					<div class="emptyGallery" ng-show="!images.length">
						<p translate class="message">ORGANIZE_IMAGES_DIALOG_EMPTY_MSG</p>
						<div class="arrow"></div>
					</div>
				</div>
			</div>
		</section>

		<div class="popup-footer">
			<button translate class="gray" 
                    bi-event="ORGIMAGES_CLICK_CANCEL"
                    ng-click="showConfirm(confirmSets)">
				ORGANIZE_IMAGES_DIALOG_CANCEL
			</button>
			<button translate class="blue" ng-click="save()">ORGANIZE_IMAGES_DIALOG_DONE</button>
		</div>

		<figure id="peek" class="zoom fade" zoom zoom-img="zoomImg" zoom-visible="zoomVisible"></figure>

		<div class="overlay fade {{overlayClass}}" ng-class="{show: overlay}">
			<div></div>
		</div>

		<div class="confirm fade" ng-class="{show: confirm.message}">
			<section class="popup">
				<header class="popup-header">
					<h1 translate>ORGANIZE_IMAGES_DIALOG_CONFIRM_HEADER</h1>
					<a class="close" ng-click="hideConfirm()">
						<i></i>
					</a>
				</header>
				<div class="popup-content">
					<p translate>{{confirm.message}}</p>
				</div>
				<footer class="popup-footer">
					<button class="gray" 
                            bi-event="ORGIMAGES_CLICK_CONFIRMATION" data-bi-event-param="no"
							ng-click="hideConfirm()" 
                            translate>
                        ORGANIZE_IMAGES_DIALOG_CONFIRM_NO
					</button>
					<button class="blue" 
                            bi-event="ORGIMAGES_CLICK_CONFIRMATION" data-bi-event-param="yes"
							ng-click="confirm.callback()" 
                            translate>
                        ORGANIZE_IMAGES_DIALOG_CONFIRM_YES
					</button>
				</footer>
			</section>
		</div>

        <section class="settings-dialog popup fade">
            <header class="popup-header">
                <h1 translate>ORGANIZE_IMAGES_DIALOG_SETS_TITLE</h1>

                <a ng-click="sendSettings('CLOSE')" class="close">
                    <i></i>
                </a>
            </header>

            <div class="popup-content">
                <p translate>ORGANIZE_IMAGES_DIALOG_SETS_BODY</p>

                <fieldset>
                    <label translate>ORGANIZE_IMAGES_DIALOG_SETS_ADD_PLACE</label>

                    <label class="select">
                        <select  ng-model="userSets.addMethod" ng-options="method.value as method.label for method in userSetsOptions.addMethod"></select>
                    </label>
                </fieldset>

                <fieldset>
                    <label translate>Organize_Images_Dialog_Sets_Add_Title</label>

                    <label class="select">
                        <select  ng-model="userSets.keepTitles" ng-options="keepTitles.value as keepTitles.label for keepTitles in userSetsOptions.keepTitles"></select>
                    </label>
                </fieldset>
            </div>

            <footer class="popup-footer">
                <button translate class="blue" ng-click="sendSettings('CONFIRM')">{{settingsText}}</button>
            </footer>
        </section>
	</div>
</div>