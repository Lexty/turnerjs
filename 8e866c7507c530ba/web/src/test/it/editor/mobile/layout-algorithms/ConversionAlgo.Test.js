
integration.noAutomation();

testRequire().classes('wysiwyg.deployment.JasmineEditorHelper');
testRequire().classes('wysiwyg.deployment.it.editor.MobileEditorUIDriver');
testRequire().classes('wysiwyg.deployment.it.editor.StructureComparisonDriver');

describe("Conversion Algorithm Test:", function () {

    beforeEach(function () {
        window.editor = window.editor || new this.JasmineEditorHelper();
        window.mobileEditorUIDriver = window.mobileEditorUIDriver || new this.MobileEditorUIDriver();
        window.structureComparisonDriver = window.structureComparisonDriver || new this.StructureComparisonDriver();
        window.structureComparisonDriver.setAlertWhenTestFails(false);
        this.testConfigParams = {};
        document.title = "Conversion Algorithm Test";

        this.algo = W.Preview.getMultiViewersHandler()._layoutAlgorithms;

        waitsFor(function () {
            return editor.isReady();
        }, 'editor to finish loading', 10000);
    });

    describe("Editor Loading", function () {
        it("should finish loading the editor", function () {
            expect(editor.isReady()).toBeTruthy();
        });
    });

    describe("Integration Tests", function() {
        describe("Text Components", function () {
            beforeEach(function() {
                //define deleteAllPageComponentsAndReaddTextComponents
                this.deleteAllPageComponentsAndReaddTextComponents = function() {
                    //delete all components in page:
                    window.mobileEditorUIDriver.switchToDesktopEditor();
                    window.mobileEditorUIDriver.deleteAllCurrentPageComponents();
                    window.mobileEditorUIDriver.deleteHeaderAndFooterComponents();

                    window.mobileEditorUIDriver.switchToMobileEditor(function(){
                        window.mobileEditorUIDriver.switchToDesktopEditor();

                        //add components to page and regenerate mobile structure:
                        var componentsToAddStringified = '[{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxte-i7u","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":665,"y":1410,"width":280,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_PARENT","targetComponent":"mainPage","locked":false,"distance":445,"topToTop":1410,"originalValue":1965},{"type":"BOTTOM_BOTTOM","targetComponent":"WPht2-btb","locked":false,"distance":185,"topToTop":55,"originalValue":350}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p dir=&@slash"rtl&@slash" class=&@slash"font_8&@slash"><span style=&@slash"font-size:24px;&@slash">23. no proportionR</span></p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c1vnq"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt6-8vj","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":45,"y":1720,"width":280,"height":80,"scale":1,"anchors":[{"type":"BOTTOM_PARENT","targetComponent":"mainPage","locked":false,"distance":165,"topToTop":1720,"originalValue":1965},{"type":"BOTTOM_BOTTOM","targetComponent":"WPht3-6vv","locked":false,"distance":165,"topToTop":25,"originalValue":270}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash"><span style=&@slash"font-size:24px;&@slash">24. no proportionL</span></p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"cqfz"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxtc-qml","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":45,"y":1265,"width":235,"height":110,"scale":1,"anchors":[{"type":"TOP_TOP","targetComponent":"WPht1-1oq","locked":true,"distance":40,"topToTop":40,"originalValue":1305},{"type":"BOTTOM_TOP","targetComponent":"WPht3-6vv","locked":false,"distance":320,"topToTop":430,"originalValue":1695}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash"><span style=&@slash"font-size:24px;&@slash">22. no proportion</span></p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c1o6q"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt9-gzk","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":40,"y":1105,"width":205,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxtc-qml","locked":true,"distance":50,"topToTop":160,"originalValue":1265}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash">19. a paragraph with <span style=&@slash"letter-spacing:0.2em;&@slash">differernt</span> char <span style=&@slash"letter-spacing:0.7em;&@slash">spacing lines</span></p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c1fra"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxta-kt0","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":345,"y":1105,"width":205,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WPht3-6vv","locked":false,"distance":480,"topToTop":590,"originalValue":1695}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p style=&@slash"line-height: 3em;&@slash" class=&@slash"font_8&@slash"><span style=&@slash"line-height:3em;&@slash">20. a paragraph with different line spacing</span></p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"ct27"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxtb-10oh","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":635,"y":1080,"width":255,"height":110,"scale":1,"anchors":[{"type":"TOP_TOP","targetComponent":"WPht0-129u","locked":true,"distance":15,"topToTop":15,"originalValue":1095},{"type":"BOTTOM_TOP","targetComponent":"WPht2-btb","locked":false,"distance":165,"topToTop":275,"originalValue":1355}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash"><span style=&@slash"font-size:24px;&@slash">21. yes&nbsp;proportion</span></p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c12c8"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt8-jkf","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":585,"y":960,"width":205,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxtb-10oh","locked":true,"distance":10,"topToTop":120,"originalValue":1080}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash">18. a paragraph with indentation</p>&@slashn&@slashn<p style=&@slash"margin-left: 40px;&@slash" class=&@slash"font_8&@slash">here it is</p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c1i2x"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt7-u7q","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":305,"y":960,"width":185,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxta-kt0","locked":true,"distance":35,"topToTop":145,"originalValue":1105}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p style=&@slash"text-align: justify;&@slash" class=&@slash"font_8&@slash">17. a paragraph with&nbsp;</p>&@slashn&@slashn<ul class=&@slash"font_8&@slash">&@slashn&@slasht<li>&@slashn&@slasht<p style=&@slash"text-align: justify;&@slash" class=&@slash"font_8&@slash">some bullets</p>&@slashn&@slasht</li>&@slashn</ul>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c6is"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt6-7jg","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":40,"y":980,"width":185,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxt9-gzk","locked":true,"distance":15,"topToTop":125,"originalValue":1105}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<ul class=&@slash"font_8&@slash">&@slashn&@slasht<li>&@slashn&@slasht<p style=&@slash"text-align: justify;&@slash" class=&@slash"font_8&@slash">16. a paragraph with bullets</p>&@slashn&@slasht</li>&@slashn&@slasht<li>&@slashn&@slasht<p style=&@slash"text-align: justify;&@slash" class=&@slash"font_8&@slash">bullets</p>&@slashn&@slasht</li>&@slashn</ul>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c7l3"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt3-1cdi","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":30,"y":820,"width":205,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxt6-7jg","locked":true,"distance":50,"topToTop":160,"originalValue":980}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p style=&@slash"text-align: center;&@slash" class=&@slash"font_8&@slash">13. a paragraph that is justified to the &nbsp;center</p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"coa1"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt4-4c6","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":350,"y":800,"width":185,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxt7-u7q","locked":true,"distance":50,"topToTop":160,"originalValue":960}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p style=&@slash"text-align: justify;&@slash" class=&@slash"font_8&@slash">14. a paragraph that is justified to the &nbsp;fill center</p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c1k9t"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt5-3ps","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":685,"y":810,"width":185,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxt8-jkf","locked":true,"distance":40,"topToTop":150,"originalValue":960}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p dir=&@slash"rtl&@slash" class=&@slash"font_8&@slash">15. וקצת בעברית, מימין לשמאל</p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"czll"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt2-10tf","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":725,"y":615,"width":220,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxt5-3ps","locked":false,"distance":85,"topToTop":195,"originalValue":810}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p style=&@slash"text-align: right;&@slash" class=&@slash"font_8&@slash">12. a paragraph that is justified to the &nbsp;right</p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c1dk6"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt1-wvp","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":305,"y":610,"width":205,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxt4-4c6","locked":false,"distance":80,"topToTop":190,"originalValue":800}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p style=&@slash"text-align: right;&@slash" class=&@slash"font_8&@slash">11. justify right</p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c232m"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt0-96k","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":45,"y":620,"width":205,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxt3-1cdi","locked":false,"distance":90,"topToTop":200,"originalValue":820}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p style=&@slash"text-align: center;&@slash" class=&@slash"font_8&@slash">10. justify center</p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c18m8"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt8-foc","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":755,"y":500,"width":205,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxt2-10tf","locked":true,"distance":5,"topToTop":115,"originalValue":615}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash">9. short</p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"cw5n"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt7-qap","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":160,"y":455,"width":310,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxt1-wvp","locked":true,"distance":45,"topToTop":155,"originalValue":610},{"type":"BOTTOM_TOP","targetComponent":"WRchTxt0-96k","locked":true,"distance":55,"topToTop":165,"originalValue":620}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash">8. paragraph with</p>&@slashn&@slashn<p class=&@slash"font_8&@slash"><span style=&@slash"font-size:24px;&@slash"><span style=&@slash"font-family:anton;&@slash">two styles on different lines</span></span></p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"cmif"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt4-qfg","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":350,"y":320,"width":205,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxt7-qap","locked":true,"distance":25,"topToTop":135,"originalValue":455}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash">6. not a tight paragraph, but lines are wrapped</p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c1s43"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt6-1662","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":685,"y":330,"width":270,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxt8-foc","locked":true,"distance":60,"topToTop":170,"originalValue":500}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash">7. paragraph with <span style=&@slash"font-size:24px;&@slash"><span style=&@slash"font-family:anton;&@slash">two styles</span></span></p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"cfnv"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt5-9no","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":680,"y":135,"width":205,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxt6-1662","locked":false,"distance":85,"topToTop":195,"originalValue":330}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash">5. paragraph with</p>&@slashn&@slashn<p class=&@slash"font_8&@slash">&nbsp;</p>&@slashn&@slashn<p class=&@slash"font_8&@slash">enters</p>&@slashn&@slashn<p class=&@slash"font_8&@slash">&nbsp;</p>&@slashn&@slashn<p class=&@slash"font_8&@slash">in the middle</p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c1874"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt3-1c16","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":385,"y":180,"width":245,"height":110,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxt4-qfg","locked":true,"distance":30,"topToTop":140,"originalValue":320},{"type":"BOTTOM_TOP","targetComponent":"WRchTxt8-jkf","locked":false,"distance":670,"topToTop":780,"originalValue":960}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash">4. not a tight paragraph</p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c21gb"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt2-i0x","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":75,"y":150,"width":150,"height":15,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxt7-qap","locked":false,"distance":229,"topToTop":305,"originalValue":455}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash">3. tigtly bound paragraph, where the minheight is smaller then the effective size</p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"cfmz"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt0-14gi","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":25,"y":20,"width":655,"height":95,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxt5-9no","locked":true,"distance":20,"topToTop":115,"originalValue":135},{"type":"BOTTOM_TOP","targetComponent":"WRchTxt2-i0x","locked":true,"distance":35,"topToTop":130,"originalValue":150},{"type":"BOTTOM_TOP","targetComponent":"WRchTxt3-1c16","locked":true,"distance":65,"topToTop":160,"originalValue":180}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<h1 class=&@slash"font_0&@slash">1. I am the main Title of the page</h1>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c7ey"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt1-3kq","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":790,"y":30,"width":175,"height":20,"scale":1,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WRchTxt5-9no","locked":false,"distance":85,"topToTop":105,"originalValue":135}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash">2. tigtly bound paragraph</p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c21uq"},{"componentType":"wysiwyg.viewer.components.WPhoto","type":"Component","id":"WPht2-btb","styleId":"wp1","skin":"wysiwyg.viewer.skins.photo.RoundPhoto","layout":{"x":615,"y":1355,"width":90,"height":350,"anchors":[{"type":"TOP_TOP","targetComponent":"WRchTxte-i7u","locked":true,"distance":55,"topToTop":55,"originalValue":1410},{"type":"BOTTOM_PARENT","targetComponent":"mainPage","locked":false,"distance":260,"topToTop":1355,"originalValue":1965}]},"data":{"type":"Image","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"target":"","linkType":"FREE_LINK","href":"","title":"camera.jpg","uri":"da9ed5_e0315fb9373bb37bdaa621fbc0c21a8b.jpg","description":"","width":252,"height":200,"alt":"","originalImageDataRef":null},"dataRefs":{},"dataId":"c22r8","props":{"type":"WPhotoProperties","displayMode":"fill"},"propsId":"c15k7"},{"componentType":"wysiwyg.viewer.components.WPhoto","type":"Component","id":"WPht3-6vv","styleId":"wp1","skin":"wysiwyg.viewer.skins.photo.RoundPhoto","layout":{"x":280,"y":1695,"width":80,"height":270,"anchors":[{"type":"TOP_TOP","targetComponent":"WRchTxt6-8vj","locked":true,"distance":25,"topToTop":25,"originalValue":1720},{"type":"BOTTOM_PARENT","targetComponent":"mainPage","locked":false,"distance":0,"topToTop":1695,"originalValue":1965}]},"data":{"type":"Image","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"target":"","linkType":"FREE_LINK","href":"","title":"camera.jpg","uri":"da9ed5_a4e5585209a6b2c5f3ce6a7c6cf6983f.jpg","description":"","width":252,"height":200,"alt":""},"dataRefs":{},"dataId":"c1z2q","props":{"type":"WPhotoProperties","displayMode":"fill"},"propsId":"cjsu"},{"componentType":"wysiwyg.viewer.components.WPhoto","type":"Component","id":"WPht1-1oq","styleId":"wp1","skin":"wysiwyg.viewer.skins.photo.RoundPhoto","layout":{"x":20,"y":1305,"width":280,"height":140,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WPht3-6vv","locked":false,"distance":250,"topToTop":390,"originalValue":1695}]},"data":{"type":"Image","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"target":"","linkType":"FREE_LINK","href":"","title":"camera.jpg","uri":"da9ed5_8c5ad5d53d45a514b46a60c5ddd87e76.png","description":"","width":252,"height":200,"alt":""},"dataRefs":{},"dataId":"c1jry","props":{"type":"WPhotoProperties","displayMode":"fill"},"propsId":"c1g09"},{"componentType":"wysiwyg.viewer.components.WPhoto","type":"Component","id":"WPht0-129u","styleId":"wp1","skin":"wysiwyg.viewer.skins.photo.RoundPhoto","layout":{"x":665,"y":1095,"width":280,"height":140,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"WPht2-btb","locked":false,"distance":120,"topToTop":260,"originalValue":1355}]},"data":{"type":"Image","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"target":"","linkType":"FREE_LINK","href":"","title":"camera.jpg","uri":"da9ed5_e0315fb9373bb37bdaa621fbc0c21a8b.jpg","description":"","width":252,"height":200,"alt":"","originalImageDataRef":null},"dataRefs":{},"dataId":"c16cj","props":{"type":"WPhotoProperties","displayMode":"fill"},"propsId":"WPht0-129u"}]';
                        window.mobileEditorUIDriver.addComponentsToPage(componentsToAddStringified, function(){
                            window.mobileEditorUIDriver.enforceAnchorsToAllPageComponents();
                            window.mobileEditorUIDriver.sleep(500, function(){
                                W.Preview.getPreviewManagers().Layout.enforceAnchors([W.Preview.getCompByID("WRchTxt7-u7q").getLogic()]);
                                W.Editor.onComponentChanged();
                            });
                        });
                    });
                };
            });

            // KEEP THIS ALWAYS ON: for some reason, deleteAllPageComponentsAndReaddTextComponents does not work
            // properly on the first time, so we just run it once before the tests, so the first "real" test will
            // work properly
            it('+ warm up mock test (essential) ', function() {
                this.deleteAllPageComponentsAndReaddTextComponents();
            });

            describe("Adding text components in different containers", function(){
                beforeEach(function(){
                    window.mobileEditorUIDriver.switchToDesktopEditor();
                    window.scrollTo(0,0);
                    window.mobileEditorUIDriver.deleteAllCurrentPageComponents();
                    window.mobileEditorUIDriver.deleteHeaderAndFooterComponents();

                    window.mobileEditorUIDriver.switchToMobileEditor(function(){
                        window.mobileEditorUIDriver.switchToDesktopEditor();

                        var componentsToAddStringified = '[{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt1-99t","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":35,"y":35,"width":450,"height":170,"scale":1,"anchors":[{"type":"TOP_TOP","targetComponent":"WPht1-1cvu","locked":true,"distance":53,"topToTop":53,"originalValue":88},{"type":"BOTTOM_TOP","targetComponent":"Cntnr0-tba","locked":false,"distance":90,"topToTop":260,"originalValue":295}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash"><span style=&@slash"font-size:30px;&@slash"><span style=&@slash"font-family:open sans;&@slash"><span class=&@slash"color_15&@slash">pageTxt1</span></span></span></p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c1kc3"},{"componentType":"wysiwyg.viewer.components.WPhoto","type":"Component","id":"WPht1-1cvu","styleId":"wp1","skin":"wysiwyg.viewer.skins.photo.RoundPhoto","layout":{"x":35,"y":88,"width":400,"height":150,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"Cntnr0-tba","locked":true,"distance":57,"topToTop":207,"originalValue":295}]},"data":{"type":"Image","uri":"44dab8ba8e2b5ec71d897466745a1623.jpg","title":"Budding Tree","description":"","width":1000,"height":750,"metaData":{"isPreset":true},"linkType":"FREE_LINK","alt":"","target":"","href":""},"dataRefs":{},"dataId":"c23wz","props":{"type":"WPhotoProperties","displayMode":"fill","metaData":{}},"propsId":"c2rz"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt0-lv5","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":515,"y":35,"width":450,"height":170,"scale":1,"anchors":[{"type":"TOP_TOP","targetComponent":"WPht0-uj1","locked":true,"distance":23,"topToTop":23,"originalValue":58},{"type":"BOTTOM_TOP","targetComponent":"Cntnr0-tba","locked":false,"distance":90,"topToTop":260,"originalValue":295}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash"><span style=&@slash"font-size:30px;&@slash"><span style=&@slash"font-family:open sans;&@slash"><span class=&@slash"color_15&@slash">page</span></span></span></p>&@slashn&@slashn<p class=&@slash"font_8&@slash"><span style=&@slash"font-size:30px;&@slash"><span style=&@slash"font-family:open sans;&@slash"><span class=&@slash"color_15&@slash">Txt2</span></span></span></p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c1ikk"},{"componentType":"wysiwyg.viewer.components.WPhoto","type":"Component","id":"WPht0-uj1","styleId":"wp1","skin":"wysiwyg.viewer.skins.photo.RoundPhoto","layout":{"x":515,"y":58,"width":400,"height":150,"anchors":[{"type":"BOTTOM_TOP","targetComponent":"Cntnr0-tba","locked":false,"distance":87,"topToTop":237,"originalValue":295}]},"data":{"type":"Image","uri":"44dab8ba8e2b5ec71d897466745a1623.jpg","title":"Budding Tree","description":"","width":1000,"height":750,"metaData":{"isPreset":true},"linkType":"FREE_LINK","alt":"","target":"","href":""},"dataRefs":{},"dataId":"c15ux","props":{"type":"WPhotoProperties","displayMode":"fill","metaData":{}},"propsId":"c11bi"},{"componentType":"mobile.core.components.Container","type":"Container","id":"Cntnr0-tba","styleId":"c1","skin":"wysiwyg.viewer.skins.area.RectangleArea","layout":{"x":25,"y":295,"width":900,"height":385,"scale":1,"anchors":[{"type":"BOTTOM_PARENT","targetComponent":"mainPage","locked":false,"distance":233,"topToTop":295,"originalValue":913}]},"components":[{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt3-d23","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":20,"y":70,"width":450,"height":170,"scale":1,"anchors":[{"type":"TOP_TOP","targetComponent":"WPht3-goj","locked":true,"distance":53,"topToTop":53,"originalValue":123},{"type":"BOTTOM_PARENT","targetComponent":"Cntnr0-tba","locked":false,"distance":145,"topToTop":70,"originalValue":385}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash"><span style=&@slash"font-size:30px;&@slash"><span style=&@slash"font-family:open sans;&@slash"><span class=&@slash"color_15&@slash">boxTxt1</span></span></span></p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c1kvo"},{"componentType":"wysiwyg.viewer.components.WPhoto","type":"Component","id":"WPht3-goj","styleId":"wp1","skin":"wysiwyg.viewer.skins.photo.RoundPhoto","layout":{"x":20,"y":123,"width":400,"height":150,"anchors":[{"type":"BOTTOM_PARENT","targetComponent":"Cntnr0-tba","locked":false,"distance":112,"topToTop":123,"originalValue":385}]},"data":{"type":"Image","uri":"44dab8ba8e2b5ec71d897466745a1623.jpg","title":"Budding Tree","description":"","width":1000,"height":750,"metaData":{"isPreset":true},"linkType":"FREE_LINK","alt":"","target":"","href":""},"dataRefs":{},"dataId":"c1k4s","props":{"type":"WPhotoProperties","displayMode":"fill","metaData":{}},"propsId":"c2es"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt2-ln7","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":500,"y":70,"width":450,"height":170,"scale":1,"anchors":[{"type":"TOP_TOP","targetComponent":"WPht2-12t8","locked":true,"distance":23,"topToTop":23,"originalValue":93},{"type":"BOTTOM_PARENT","targetComponent":"Cntnr0-tba","locked":false,"distance":145,"topToTop":70,"originalValue":385}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash"><span style=&@slash"font-size:30px;&@slash"><span style=&@slash"font-family:open sans;&@slash"><span class=&@slash"color_15&@slash">boxTxt2</span></span></span></p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c448"},{"componentType":"wysiwyg.viewer.components.WPhoto","type":"Component","id":"WPht2-12t8","styleId":"wp1","skin":"wysiwyg.viewer.skins.photo.RoundPhoto","layout":{"x":500,"y":93,"width":400,"height":150,"anchors":[{"type":"BOTTOM_PARENT","targetComponent":"Cntnr0-tba","locked":false,"distance":142,"topToTop":93,"originalValue":385}]},"data":{"type":"Image","uri":"44dab8ba8e2b5ec71d897466745a1623.jpg","title":"Budding Tree","description":"","width":1000,"height":750,"metaData":{"isPreset":true},"linkType":"FREE_LINK","alt":"","target":"","href":""},"dataRefs":{},"dataId":"chrt","props":{"type":"WPhotoProperties","displayMode":"fill","metaData":{}},"propsId":"c1q54"}]}]';
                        window.mobileEditorUIDriver.addComponentsToPage(componentsToAddStringified, function(){
                            var componentsToAddToHeaderStringified = '[{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt6-z98","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":575,"y":50,"width":355,"height":170,"scale":1,"anchors":[{"type":"TOP_TOP","targetComponent":"WPht7-r9t","locked":true,"distance":20,"topToTop":20,"originalValue":70},{"type":"BOTTOM_PARENT","targetComponent":"SITE_HEADER","locked":true,"distance":45,"topToTop":50,"originalValue":265}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash"><span style=&@slash"font-size:30px;&@slash"><span style=&@slash"font-family:open sans;&@slash"><span class=&@slash"color_15&@slash">headerTxt2</span></span></span></p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c9ji"},{"componentType":"wysiwyg.viewer.components.WPhoto","type":"Component","id":"WPht7-r9t","styleId":"wp1","skin":"wysiwyg.viewer.skins.photo.RoundPhoto","layout":{"x":545,"y":70,"width":400,"height":150,"anchors":[{"type":"BOTTOM_PARENT","targetComponent":"SITE_HEADER","locked":true,"distance":45,"topToTop":70,"originalValue":265}]},"data":{"type":"Image","uri":"44dab8ba8e2b5ec71d897466745a1623.jpg","title":"Budding Tree","description":"","width":1000,"height":750,"metaData":{"isPreset":true},"linkType":"FREE_LINK","alt":"","target":"","href":""},"dataRefs":{},"dataId":"c1wf9","props":{"type":"WPhotoProperties","displayMode":"fill","metaData":{}},"propsId":"c1s2i"},{"componentType":"wysiwyg.viewer.components.WPhoto","type":"Component","id":"WPht2-11if","styleId":"wp1","skin":"wysiwyg.viewer.skins.photo.RoundPhoto","layout":{"x":20,"y":85,"width":400,"height":150,"anchors":[{"type":"BOTTOM_PARENT","targetComponent":"SITE_HEADER","locked":true,"distance":30,"topToTop":85,"originalValue":265}]},"data":{"type":"Image","uri":"44dab8ba8e2b5ec71d897466745a1623.jpg","title":"Budding Tree","description":"","width":1000,"height":750,"metaData":{"isPreset":true},"linkType":"FREE_LINK","alt":"","target":"","href":""},"dataRefs":{},"dataId":"c1fzg","props":{"type":"WPhotoProperties","displayMode":"fill","metaData":{}},"propsId":"c1dfa"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt0-cks","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":45,"y":35,"width":355,"height":170,"scale":1,"anchors":[{"type":"TOP_TOP","targetComponent":"WPht2-11if","locked":true,"distance":50,"topToTop":50,"originalValue":85},{"type":"BOTTOM_PARENT","targetComponent":"SITE_HEADER","locked":true,"distance":60,"topToTop":35,"originalValue":265}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash"><span style=&@slash"font-size:30px;&@slash"><span style=&@slash"font-family:open sans;&@slash"><span class=&@slash"color_15&@slash">headerTxt1</span></span></span></p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c11gd"}]';
                            window.mobileEditorUIDriver.addComponentsToContainer(componentsToAddToHeaderStringified, 'SITE_HEADER', function(){
                                var componentsToAddToFooterStringified = '[{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt3-s1p","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":505,"y":22,"width":450,"height":170,"scale":1,"anchors":[{"type":"TOP_TOP","targetComponent":"WPht4-w8m","locked":true,"distance":23,"topToTop":23,"originalValue":45},{"type":"BOTTOM_PARENT","targetComponent":"SITE_FOOTER","locked":true,"distance":48,"topToTop":22,"originalValue":240}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash"><span style=&@slash"font-size:30px;&@slash"><span style=&@slash"font-family:open sans;&@slash"><span class=&@slash"color_15&@slash">footerTxt2</span></span></span></p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"c1618"},{"componentType":"wysiwyg.viewer.components.WPhoto","type":"Component","id":"WPht4-w8m","styleId":"wp1","skin":"wysiwyg.viewer.skins.photo.RoundPhoto","layout":{"x":505,"y":45,"width":400,"height":150,"anchors":[{"type":"BOTTOM_PARENT","targetComponent":"SITE_FOOTER","locked":true,"distance":45,"topToTop":45,"originalValue":240}]},"data":{"type":"Image","uri":"44dab8ba8e2b5ec71d897466745a1623.jpg","title":"Budding Tree","description":"","width":1000,"height":750,"metaData":{"isPreset":true},"linkType":"FREE_LINK","alt":"","target":"","href":""},"dataRefs":{},"dataId":"c51t","props":{"type":"WPhotoProperties","displayMode":"fill","metaData":{}},"propsId":"c1nrc"},{"componentType":"wysiwyg.viewer.components.WPhoto","type":"Component","id":"WPht3-18c3","styleId":"wp1","skin":"wysiwyg.viewer.skins.photo.RoundPhoto","layout":{"x":25,"y":75,"width":400,"height":150,"anchors":[{"type":"BOTTOM_PARENT","targetComponent":"SITE_FOOTER","locked":true,"distance":15,"topToTop":75,"originalValue":240}]},"data":{"type":"Image","uri":"44dab8ba8e2b5ec71d897466745a1623.jpg","title":"Budding Tree","description":"","width":1000,"height":750,"metaData":{"isPreset":true},"linkType":"FREE_LINK","alt":"","target":"","href":""},"dataRefs":{},"dataId":"c1uwm","props":{"type":"WPhotoProperties","displayMode":"fill","metaData":{}},"propsId":"c1m5o"},{"componentType":"wysiwyg.viewer.components.WRichText","type":"Component","id":"WRchTxt1-6wd","styleId":"txtNew","skin":"wysiwyg.viewer.skins.WRichTextNewSkin","layout":{"x":25,"y":22,"width":450,"height":170,"scale":1,"anchors":[{"type":"TOP_TOP","targetComponent":"WPht3-18c3","locked":true,"distance":53,"topToTop":53,"originalValue":75},{"type":"BOTTOM_PARENT","targetComponent":"SITE_FOOTER","locked":true,"distance":48,"topToTop":22,"originalValue":240}]},"data":{"type":"StyledText","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"text":"<p class=&@slash"font_8&@slash"><span style=&@slash"font-size:30px;&@slash"><span style=&@slash"font-family:open sans;&@slash"><span class=&@slash"color_15&@slash">footerTxt1</span></span></span></p>&@slashn","stylesMapId":"CK_EDITOR_PARAGRAPH_STYLES"},"dataRefs":{},"dataId":"cewt"}]';
                                window.mobileEditorUIDriver.addComponentsToContainer(componentsToAddToFooterStringified, 'SITE_FOOTER', function(){
//                                    window.mobileEditorUIDriver.sleep(100, function() {});
                                });
                            });
                        });
                    });
                });

                it("+ should have correct layout upon regeneration of mobile layout", function(){
                    window.mobileEditorUIDriver.switchToMobileEditor(function(){
                        window.mobileEditorUIDriver.regenerateWholeMobileStructureLayout(function(){
                            window.mobileEditorUIDriver.sleep(500, function(){
                                var expectedMobileSiteResults = !this._isRefactoredVersion
                                    ? '{"pageToComponentIdList":{"mainPage":["mainPage","WRchTxt1-99t","WPht1-1cvu","WRchTxt0-lv5","WPht0-uj1","Cntnr0-tba","WRchTxt3-d23","WPht3-goj","WRchTxt2-ln7","WPht2-12t8"],"masterPage":["SITE_FOOTER","WRchTxt1-6wd","WPht3-18c3","WRchTxt3-s1p","WPht4-w8m","SITE_HEADER","WRchTxt0-cks","WPht2-11if","WRchTxt6-z98","WPht7-r9t","TINY_MENU","PAGES_CONTAINER","SITE_PAGES"]},"pageToStructureSkeleton":{"mainPage":"mainPage:{&@slashn---WRchTxt1-99t,&@slashn---WPht1-1cvu,&@slashn---WRchTxt0-lv5,&@slashn---WPht0-uj1,&@slashn---Cntnr0-tba:{&@slashn------WRchTxt3-d23,&@slashn------WPht3-goj,&@slashn------WRchTxt2-ln7,&@slashn------WPht2-12t8&@slashn---}&@slashn&@slashn}&@slashn","masterPage":"ROOT:{&@slashn---SITE_FOOTER:{&@slashn------WRchTxt1-6wd,&@slashn------WPht3-18c3,&@slashn------WRchTxt3-s1p,&@slashn------WPht4-w8m&@slashn---}&@slashn,&@slashn---SITE_HEADER:{&@slashn------WRchTxt0-cks,&@slashn------WPht2-11if,&@slashn------WRchTxt6-z98,&@slashn------WPht7-r9t,&@slashn------TINY_MENU&@slashn---}&@slashn,&@slashn---PAGES_CONTAINER:{&@slashn------SITE_PAGES&@slashn---}&@slashn&@slashn}&@slashn"},"pageToLayoutDetails":{"mainPage":"mainPage:{x:0,y:0,width:320,height:618}&@slashn---WRchTxt1-99t:{x:92,y:10,width:136,height:41}&@slashn---WPht1-1cvu:{x:20,y:61,width:280,height:105}&@slashn---WRchTxt0-lv5:{x:20,y:176,width:51,height:57}&@slashn---WPht0-uj1:{x:20,y:192,width:280,height:105}&@slashn---Cntnr0-tba:{x:20,y:307,width:280,height:291}&@slashn------WRchTxt3-d23:{x:80,y:10,width:119,height:41}&@slashn------WPht3-goj:{x:10,y:61,width:260,height:98}&@slashn------WRchTxt2-ln7:{x:10,y:169,width:78,height:27}&@slashn------WPht2-12t8:{x:10,y:184,width:260,height:98}&@slashn","masterPage":"---SITE_FOOTER:{x:0,y:993,width:320,height:303}&@slashn------WRchTxt1-6wd:{x:20,y:10,width:280,height:37}&@slashn------WPht3-18c3:{x:20,y:57,width:280,height:105}&@slashn------WRchTxt3-s1p:{x:20,y:172,width:109,height:29}&@slashn------WPht4-w8m:{x:20,y:188,width:280,height:105}&@slashn---SITE_HEADER:{x:0,y:10,width:320,height:345}&@slashn------WRchTxt0-cks:{x:20,y:10,width:210,height:37}&@slashn------WPht2-11if:{x:20,y:101,width:280,height:105}&@slashn------WRchTxt6-z98:{x:41,y:216,width:118,height:29}&@slashn------WPht7-r9t:{x:20,y:230,width:280,height:105}&@slashn------TINY_MENU:{x:250,y:10,width:50,height:50}&@slashn---PAGES_CONTAINER:{x:0,y:365,width:320,height:618}&@slashn------SITE_PAGES:{x:0,y:0,width:320,height:618}&@slashn"},"pageToAnchors":{"mainPage":"mainPage:[&@slashn]&@slashn---WRchTxt1-99t:[&@slashn{distance:10,locked:true,originalValue:61,targetComponent:WPht1-1cvu,topToTop:51,type:BOTTOM_TOP}&@slashn]&@slashn---WPht1-1cvu:[&@slashn{distance:10,locked:true,originalValue:176,targetComponent:WRchTxt0-lv5,topToTop:115,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt0-lv5:[&@slashn{distance:16,locked:true,originalValue:192,targetComponent:WPht0-uj1,topToTop:16,type:TOP_TOP}&@slashn{distance:74,locked:false,originalValue:307,targetComponent:Cntnr0-tba,topToTop:131,type:BOTTOM_TOP}&@slashn]&@slashn---WPht0-uj1:[&@slashn{distance:10,locked:true,originalValue:307,targetComponent:Cntnr0-tba,topToTop:115,type:BOTTOM_TOP}&@slashn]&@slashn---Cntnr0-tba:[&@slashn{distance:10,locked:true,originalValue:608,targetComponent:mainPage,topToTop:307,type:BOTTOM_PARENT}&@slashn]&@slashn------WRchTxt3-d23:[&@slashn{distance:10,locked:true,originalValue:61,targetComponent:WPht3-goj,topToTop:51,type:BOTTOM_TOP}&@slashn]&@slashn------WPht3-goj:[&@slashn{distance:10,locked:true,originalValue:169,targetComponent:WRchTxt2-ln7,topToTop:108,type:BOTTOM_TOP}&@slashn]&@slashn------WRchTxt2-ln7:[&@slashn{distance:-12,locked:true,originalValue:184,targetComponent:WPht2-12t8,topToTop:15,type:BOTTOM_TOP}&@slashn]&@slashn------WPht2-12t8:[&@slashn{distance:9,locked:true,originalValue:291,targetComponent:Cntnr0-tba,topToTop:184,type:BOTTOM_PARENT}&@slashn]&@slashn","masterPage":"---SITE_FOOTER:[&@slashn{distance:10,locked:true,originalValue:500,targetComponent:SITE_STRUCTURE,topToTop:500,type:BOTTOM_PARENT}&@slashn]&@slashn------WRchTxt1-6wd:[&@slashn{distance:10,locked:true,originalValue:29,targetComponent:WPht3-18c3,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn------WPht3-18c3:[&@slashn{distance:10,locked:true,originalValue:144,targetComponent:WRchTxt3-s1p,topToTop:115,type:BOTTOM_TOP}&@slashn]&@slashn------WRchTxt3-s1p:[&@slashn{distance:-13,locked:true,originalValue:160,targetComponent:WPht4-w8m,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn------WPht4-w8m:[&@slashn{distance:10,locked:true,originalValue:275,targetComponent:SITE_FOOTER,topToTop:160,type:BOTTOM_PARENT}&@slashn]&@slashn---SITE_HEADER:[&@slashn{distance:10,locked:true,originalValue:334,targetComponent:PAGES_CONTAINER,topToTop:324,type:BOTTOM_TOP}&@slashn]&@slashn------WRchTxt0-cks:[&@slashn{distance:54,locked:true,originalValue:70,targetComponent:WPht2-11if,topToTop:60,type:BOTTOM_TOP}&@slashn]&@slashn------WPht2-11if:[&@slashn{distance:10,locked:true,originalValue:185,targetComponent:WRchTxt6-z98,topToTop:115,type:BOTTOM_TOP}&@slashn]&@slashn------WRchTxt6-z98:[&@slashn{distance:14,locked:true,originalValue:199,targetComponent:WPht7-r9t,topToTop:14,type:TOP_TOP}&@slashn{distance:100,locked:false,originalValue:314,targetComponent:SITE_HEADER,topToTop:185,type:BOTTOM_PARENT}&@slashn]&@slashn------WPht7-r9t:[&@slashn{distance:10,locked:true,originalValue:314,targetComponent:SITE_HEADER,topToTop:199,type:BOTTOM_PARENT}&@slashn]&@slashn------TINY_MENU:[&@slashn{distance:10,locked:true,originalValue:70,targetComponent:WPht2-11if,topToTop:60,type:BOTTOM_TOP}&@slashn]&@slashn---PAGES_CONTAINER:[&@slashn{distance:10,locked:true,originalValue:1044,targetComponent:SITE_FOOTER,topToTop:710,type:BOTTOM_TOP}&@slashn]&@slashn------SITE_PAGES:[&@slashn{distance:0,locked:true,originalValue:700,targetComponent:PAGES_CONTAINER,topToTop:0,type:BOTTOM_PARENT}&@slashn]&@slashn"}}'
                                    : '{"pageToComponentIdList":{"mainPage":["mainPage","WRchTxt1-99t","WPht1-1cvu","WRchTxt0-lv5","WPht0-uj1","Cntnr0-tba","WRchTxt3-d23","WPht3-goj","WRchTxt2-ln7","WPht2-12t8"],"masterPage":["SITE_FOOTER","WRchTxt1-6wd","WPht3-18c3","WRchTxt3-s1p","WPht4-w8m","SITE_HEADER","WRchTxt0-cks","WPht2-11if","WRchTxt6-z98","WPht7-r9t","TINY_MENU","PAGES_CONTAINER","SITE_PAGES"]},"pageToStructureSkeleton":{"mainPage":"mainPage:{&@slashn---WRchTxt1-99t,&@slashn---WPht1-1cvu,&@slashn---WRchTxt0-lv5,&@slashn---WPht0-uj1,&@slashn---Cntnr0-tba:{&@slashn------WRchTxt3-d23,&@slashn------WPht3-goj,&@slashn------WRchTxt2-ln7,&@slashn------WPht2-12t8&@slashn---}&@slashn&@slashn}&@slashn","masterPage":"ROOT:{&@slashn---SITE_FOOTER:{&@slashn------WRchTxt1-6wd,&@slashn------WPht3-18c3,&@slashn------WRchTxt3-s1p,&@slashn------WPht4-w8m&@slashn---}&@slashn,&@slashn---SITE_HEADER:{&@slashn------WRchTxt0-cks,&@slashn------WPht2-11if,&@slashn------WRchTxt6-z98,&@slashn------WPht7-r9t,&@slashn------TINY_MENU&@slashn---}&@slashn,&@slashn---PAGES_CONTAINER:{&@slashn------SITE_PAGES&@slashn---}&@slashn&@slashn}&@slashn"},"pageToLayoutDetails":{"mainPage":"mainPage:{x:0,y:0,width:320,height:618}&@slashn---WRchTxt1-99t:{x:92,y:10,width:136,height:41}&@slashn---WPht1-1cvu:{x:20,y:61,width:280,height:105}&@slashn---WRchTxt0-lv5:{x:20,y:176,width:51,height:57}&@slashn---WPht0-uj1:{x:20,y:192,width:280,height:105}&@slashn---Cntnr0-tba:{x:20,y:307,width:280,height:291}&@slashn------WRchTxt3-d23:{x:80,y:10,width:119,height:41}&@slashn------WPht3-goj:{x:10,y:61,width:260,height:98}&@slashn------WRchTxt2-ln7:{x:10,y:169,width:78,height:27}&@slashn------WPht2-12t8:{x:10,y:184,width:260,height:98}&@slashn","masterPage":"---SITE_FOOTER:{x:0,y:992,width:320,height:303}&@slashn------WRchTxt1-6wd:{x:20,y:10,width:280,height:37}&@slashn------WPht3-18c3:{x:20,y:57,width:280,height:105}&@slashn------WRchTxt3-s1p:{x:20,y:172,width:104,height:29}&@slashn------WPht4-w8m:{x:20,y:188,width:280,height:105}&@slashn---SITE_HEADER:{x:0,y:10,width:320,height:344}&@slashn------WRchTxt0-cks:{x:20,y:10,width:210,height:37}&@slashn------WPht2-11if:{x:20,y:100,width:280,height:105}&@slashn------WRchTxt6-z98:{x:41,y:215,width:113,height:29}&@slashn------WPht7-r9t:{x:20,y:229,width:280,height:105}&@slashn------TINY_MENU:{x:250,y:10,width:50,height:50}&@slashn---PAGES_CONTAINER:{x:0,y:364,width:320,height:618}&@slashn------SITE_PAGES:{x:0,y:0,width:320,height:618}&@slashn"},"pageToAnchors":{"mainPage":"mainPage:[&@slashn]&@slashn---WRchTxt1-99t:[&@slashn{distance:10,locked:true,originalValue:61,targetComponent:WPht1-1cvu,topToTop:51,type:BOTTOM_TOP}&@slashn]&@slashn---WPht1-1cvu:[&@slashn{distance:10,locked:true,originalValue:176,targetComponent:WRchTxt0-lv5,topToTop:115,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt0-lv5:[&@slashn{distance:16,locked:true,originalValue:192,targetComponent:WPht0-uj1,topToTop:16,type:TOP_TOP}&@slashn{distance:74,locked:false,originalValue:307,targetComponent:Cntnr0-tba,topToTop:131,type:BOTTOM_TOP}&@slashn]&@slashn---WPht0-uj1:[&@slashn{distance:10,locked:true,originalValue:307,targetComponent:Cntnr0-tba,topToTop:115,type:BOTTOM_TOP}&@slashn]&@slashn---Cntnr0-tba:[&@slashn{distance:10,locked:true,originalValue:608,targetComponent:mainPage,topToTop:307,type:BOTTOM_PARENT}&@slashn]&@slashn------WRchTxt3-d23:[&@slashn{distance:10,locked:true,originalValue:61,targetComponent:WPht3-goj,topToTop:51,type:BOTTOM_TOP}&@slashn]&@slashn------WPht3-goj:[&@slashn{distance:10,locked:true,originalValue:169,targetComponent:WRchTxt2-ln7,topToTop:108,type:BOTTOM_TOP}&@slashn]&@slashn------WRchTxt2-ln7:[&@slashn{distance:-12,locked:true,originalValue:184,targetComponent:WPht2-12t8,topToTop:15,type:BOTTOM_TOP}&@slashn]&@slashn------WPht2-12t8:[&@slashn{distance:9,locked:true,originalValue:291,targetComponent:Cntnr0-tba,topToTop:184,type:BOTTOM_PARENT}&@slashn]&@slashn","masterPage":"---SITE_FOOTER:[&@slashn{distance:10,locked:true,originalValue:500,targetComponent:SITE_STRUCTURE,topToTop:500,type:BOTTOM_PARENT}&@slashn]&@slashn------WRchTxt1-6wd:[&@slashn{distance:10,locked:true,originalValue:29,targetComponent:WPht3-18c3,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn------WPht3-18c3:[&@slashn{distance:10,locked:true,originalValue:144,targetComponent:WRchTxt3-s1p,topToTop:115,type:BOTTOM_TOP}&@slashn]&@slashn------WRchTxt3-s1p:[&@slashn{distance:-13,locked:true,originalValue:160,targetComponent:WPht4-w8m,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn------WPht4-w8m:[&@slashn{distance:10,locked:true,originalValue:275,targetComponent:SITE_FOOTER,topToTop:160,type:BOTTOM_PARENT}&@slashn]&@slashn---SITE_HEADER:[&@slashn{distance:10,locked:true,originalValue:334,targetComponent:PAGES_CONTAINER,topToTop:324,type:BOTTOM_TOP}&@slashn]&@slashn------WRchTxt0-cks:[&@slashn{distance:53,locked:true,originalValue:70,targetComponent:WPht2-11if,topToTop:60,type:BOTTOM_TOP}&@slashn]&@slashn------WPht2-11if:[&@slashn{distance:10,locked:true,originalValue:185,targetComponent:WRchTxt6-z98,topToTop:115,type:BOTTOM_TOP}&@slashn]&@slashn------WRchTxt6-z98:[&@slashn{distance:14,locked:true,originalValue:199,targetComponent:WPht7-r9t,topToTop:14,type:TOP_TOP}&@slashn{distance:100,locked:false,originalValue:314,targetComponent:SITE_HEADER,topToTop:185,type:BOTTOM_PARENT}&@slashn]&@slashn------WPht7-r9t:[&@slashn{distance:10,locked:true,originalValue:314,targetComponent:SITE_HEADER,topToTop:199,type:BOTTOM_PARENT}&@slashn]&@slashn------TINY_MENU:[&@slashn{distance:10,locked:true,originalValue:70,targetComponent:WPht2-11if,topToTop:60,type:BOTTOM_TOP}&@slashn]&@slashn---PAGES_CONTAINER:[&@slashn{distance:10,locked:true,originalValue:1044,targetComponent:SITE_FOOTER,topToTop:710,type:BOTTOM_TOP}&@slashn]&@slashn------SITE_PAGES:[&@slashn{distance:0,locked:true,originalValue:700,targetComponent:PAGES_CONTAINER,topToTop:0,type:BOTTOM_PARENT}&@slashn]&@slashn"}}';
                                window.structureComparisonDriver.testPage('mainPage', expectedMobileSiteResults);
                                window.structureComparisonDriver.testPage('masterPage', expectedMobileSiteResults);
                            });
                        });
                    });
                });//it

                it("+ should calculate the effective text layout of text components in varying containers, when in mobile editor", function(){

                    window.mobileEditorUIDriver.switchToMobileEditor(function(){
                        var headerComponentIds = window.mobileEditorUIDriver.getContainerDirectChildrenIds('SITE_HEADER');
                        var footerComponentIds = window.mobileEditorUIDriver.getContainerDirectChildrenIds('SITE_FOOTER');
                        var pageComponentIds = window.mobileEditorUIDriver.getAllPageComponents().map(function(comp){return comp.getComponentId();})
                        var componentIds = headerComponentIds.concat(footerComponentIds).concat(pageComponentIds);
                        var calculatedTextBorders = window.structureComparisonDriver.getTextBorders(componentIds);
                        var expectedTextBordersStringified = '{"WRchTxt6-z98":{"x":575,"y":50,"width":161,"height":41},"WRchTxt0-cks":{"x":45,"y":35,"width":161,"height":41},"WRchTxt3-s1p":{"x":505,"y":22,"width":148,"height":41},"WRchTxt1-6wd":{"x":25,"y":22,"width":148,"height":41},"WRchTxt1-99t":{"x":35,"y":35,"width":130,"height":41},"WRchTxt0-lv5":{"x":515,"y":35,"width":69,"height":82},"WRchTxt3-d23":{"x":20,"y":70,"width":114,"height":41},"WRchTxt2-ln7":{"x":500,"y":70,"width":114,"height":41}}';
                        var expectedTextBorders = JSON.parse(expectedTextBordersStringified);

                        for (var i=0; i< _.keys(calculatedTextBorders).length; i++) {
                            var curCompId = _.keys(calculatedTextBorders)[i];
                            expect(JSON.stringify(calculatedTextBorders[curCompId])).toBe(JSON.stringify(expectedTextBorders[curCompId]));
                        }
                    });

                });//it

                it("+ should calculate the effective text layout of text components in varying containers, when in desktop editor", function(){

                    window.mobileEditorUIDriver.sleep(300, function(){

                        var headerComponentIds = window.mobileEditorUIDriver.getContainerDirectChildrenIds('SITE_HEADER');
                        var footerComponentIds = window.mobileEditorUIDriver.getContainerDirectChildrenIds('SITE_FOOTER');
                        var pageComponentIds = window.mobileEditorUIDriver.getAllPageComponents().map(function(comp){return comp.getComponentId();})
                        var componentIds = headerComponentIds.concat(footerComponentIds).concat(pageComponentIds);
                        var calculatedTextBorders = window.structureComparisonDriver.getTextBorders(componentIds);
                        var expectedTextBordersStringified = '{"WRchTxt6-z98":{"x":575,"y":50,"width":161,"height":41},"WRchTxt0-cks":{"x":45,"y":35,"width":161,"height":41},"WRchTxt3-s1p":{"x":505,"y":22,"width":148,"height":41},"WRchTxt1-6wd":{"x":25,"y":22,"width":148,"height":41},"WRchTxt1-99t":{"x":35,"y":35,"width":130,"height":41},"WRchTxt0-lv5":{"x":515,"y":35,"width":69,"height":82},"WRchTxt3-d23":{"x":20,"y":70,"width":114,"height":41},"WRchTxt2-ln7":{"x":500,"y":70,"width":114,"height":41}}';
                        var expectedTextBorders = JSON.parse(expectedTextBordersStringified);

                        for (var i=0; i< _.keys(calculatedTextBorders).length; i++) {
                            var curCompId = _.keys(calculatedTextBorders)[i];
                            expect(JSON.stringify(calculatedTextBorders[curCompId])).toBe(JSON.stringify(expectedTextBorders[curCompId]));
                        }

                    });
                });//it

            });//describe

            describe("General page layout with many types of text comps", function () {

                describe('Testing resulting page layout ', function(){

                    beforeEach(function() {
                        this.deleteAllPageComponentsAndReaddTextComponents();
                    });

                    //PASS
                    it('+ without scroll down before regenerate', function() {
                        window.mobileEditorUIDriver.switchToMobileEditor(function(){
                            window.mobileEditorUIDriver.regenerateWholeMobileStructureLayout(function(){
                                window.mobileEditorUIDriver.sleep(200, function(){
//                                    var expectedMobileSiteResults = '{"pageToComponentIdList":{"mainPage":["mainPage","WRchTxt0-14gi","WRchTxt1-3kq","WRchTxt2-i0x","WRchTxt3-1c16","WRchTxt5-9no","WRchTxt4-qfg","WRchTxt6-1662","WRchTxt7-qap","WRchTxt8-foc","WRchTxt0-96k","WRchTxt1-wvp","WRchTxt2-10tf","WRchTxt3-1cdi","WRchTxt4-4c6","WRchTxt5-3ps","WRchTxt6-7jg","WRchTxt7-u7q","WRchTxt8-jkf","WRchTxt9-gzk","WRchTxta-kt0","WRchTxtb-10oh","WPht0-129u","WRchTxtc-qml","WPht1-1oq","WPht2-btb","WRchTxte-i7u","WRchTxt6-8vj","WPht3-6vv"],"masterPage":["SITE_FOOTER","SITE_HEADER","TINY_MENU","PAGES_CONTAINER","SITE_PAGES"]},"pageToStructureSkeleton":{"mainPage":"mainPage:{&@slashn---WRchTxt0-14gi,&@slashn---WRchTxt1-3kq,&@slashn---WRchTxt2-i0x,&@slashn---WRchTxt3-1c16,&@slashn---WRchTxt5-9no,&@slashn---WRchTxt4-qfg,&@slashn---WRchTxt6-1662,&@slashn---WRchTxt7-qap,&@slashn---WRchTxt8-foc,&@slashn---WRchTxt0-96k,&@slashn---WRchTxt1-wvp,&@slashn---WRchTxt2-10tf,&@slashn---WRchTxt3-1cdi,&@slashn---WRchTxt4-4c6,&@slashn---WRchTxt5-3ps,&@slashn---WRchTxt6-7jg,&@slashn---WRchTxt7-u7q,&@slashn---WRchTxt8-jkf,&@slashn---WRchTxt9-gzk,&@slashn---WRchTxta-kt0,&@slashn---WRchTxtb-10oh,&@slashn---WPht0-129u,&@slashn---WRchTxtc-qml,&@slashn---WPht1-1oq,&@slashn---WPht2-btb,&@slashn---WRchTxte-i7u,&@slashn---WRchTxt6-8vj,&@slashn---WPht3-6vv&@slashn}&@slashn","masterPage":"ROOT:{&@slashn---SITE_FOOTER,&@slashn---SITE_HEADER:{&@slashn------TINY_MENU&@slashn---}&@slashn,&@slashn---PAGES_CONTAINER:{&@slashn------SITE_PAGES&@slashn---}&@slashn&@slashn}&@slashn"},"pageToLayoutDetails":{"mainPage":"mainPage:{x:0,y:0,width:320,height:2125}&@slashn---WRchTxt0-14gi:{x:20,y:10,width:280,height:5}&@slashn---WRchTxt1-3kq:{x:20,y:104,width:280,height:8}&@slashn---WRchTxt2-i0x:{x:20,y:134,width:280,height:9}&@slashn---WRchTxt3-1c16:{x:20,y:204,width:280,height:8}&@slashn---WRchTxt5-9no:{x:96,y:234,width:127,height:95}&@slashn---WRchTxt4-qfg:{x:20,y:344,width:280,height:7}&@slashn---WRchTxt6-1662:{x:20,y:394,width:280,height:6}&@slashn---WRchTxt7-qap:{x:20,y:440,width:280,height:5}&@slashn---WRchTxt8-foc:{x:56,y:506,width:54,height:19}&@slashn---WRchTxt0-96k:{x:146,y:506,width:117,height:19}&@slashn---WRchTxt1-wvp:{x:106,y:536,width:107,height:19}&@slashn---WRchTxt2-10tf:{x:20,y:566,width:280,height:6}&@slashn---WRchTxt3-1cdi:{x:20,y:616,width:280,height:9}&@slashn---WRchTxt4-4c6:{x:20,y:666,width:280,height:7}&@slashn---WRchTxt5-3ps:{x:20,y:716,width:280,height:8}&@slashn---WRchTxt6-7jg:{x:20,y:746,width:280,height:8}&@slashn---WRchTxt7-u7q:{x:20,y:796,width:280,height:9}&@slashn---WRchTxt8-jkf:{x:20,y:846,width:280,height:9}&@slashn---WRchTxt9-gzk:{x:20,y:896,width:280,height:9}&@slashn---WRchTxta-kt0:{x:20,y:946,width:280,height:7}&@slashn---WRchTxtb-10oh:{x:20,y:1046,width:196,height:30}&@slashn---WPht0-129u:{x:47,y:1060,width:253,height:126}&@slashn---WRchTxtc-qml:{x:20,y:1196,width:280,height:7}&@slashn---WPht1-1oq:{x:20,y:1239,width:280,height:140}&@slashn---WPht2-btb:{x:115,y:1389,width:90,height:350}&@slashn---WRchTxte-i7u:{x:20,y:1749,width:280,height:6}&@slashn---WRchTxt6-8vj:{x:20,y:1792,width:280,height:6}&@slashn---WPht3-6vv:{x:120,y:1835,width:80,height:270}&@slashn","masterPage":"---SITE_FOOTER:{x:0,y:2215,width:320,height:55}&@slashn---SITE_HEADER:{x:0,y:10,width:320,height:60}&@slashn------TINY_MENU:{x:250,y:10,width:50,height:50}&@slashn---PAGES_CONTAINER:{x:0,y:80,width:320,height:2125}&@slashn------SITE_PAGES:{x:0,y:0,width:320,height:2125}&@slashn"},"pageToAnchors":{"mainPage":"mainPage:[&@slashn]&@slashn---WRchTxt0-14gi:[&@slashn{distance:10,locked:true,originalValue:22,targetComponent:WRchTxt1-3kq,topToTop:12,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt1-3kq:[&@slashn{distance:10,locked:true,originalValue:40,targetComponent:WRchTxt2-i0x,topToTop:18,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt2-i0x:[&@slashn{distance:10,locked:true,originalValue:59,targetComponent:WRchTxt3-1c16,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt3-1c16:[&@slashn{distance:10,locked:true,originalValue:77,targetComponent:WRchTxt5-9no,topToTop:18,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt5-9no:[&@slashn{distance:10,locked:true,originalValue:182,targetComponent:WRchTxt4-qfg,topToTop:105,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt4-qfg:[&@slashn{distance:10,locked:true,originalValue:199,targetComponent:WRchTxt6-1662,topToTop:17,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt6-1662:[&@slashn{distance:10,locked:true,originalValue:215,targetComponent:WRchTxt7-qap,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt7-qap:[&@slashn{distance:10,locked:true,originalValue:230,targetComponent:WRchTxt8-foc,topToTop:15,type:BOTTOM_TOP}&@slashn{distance:10,locked:true,originalValue:230,targetComponent:WRchTxt0-96k,topToTop:15,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt8-foc:[&@slashn{distance:10,locked:true,originalValue:259,targetComponent:WRchTxt1-wvp,topToTop:29,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt0-96k:[&@slashn{distance:10,locked:true,originalValue:259,targetComponent:WRchTxt1-wvp,topToTop:29,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt1-wvp:[&@slashn{distance:10,locked:true,originalValue:288,targetComponent:WRchTxt2-10tf,topToTop:29,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt2-10tf:[&@slashn{distance:10,locked:true,originalValue:304,targetComponent:WRchTxt3-1cdi,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt3-1cdi:[&@slashn{distance:10,locked:true,originalValue:323,targetComponent:WRchTxt4-4c6,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt4-4c6:[&@slashn{distance:10,locked:true,originalValue:340,targetComponent:WRchTxt5-3ps,topToTop:17,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt5-3ps:[&@slashn{distance:10,locked:true,originalValue:358,targetComponent:WRchTxt6-7jg,topToTop:18,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt6-7jg:[&@slashn{distance:10,locked:true,originalValue:376,targetComponent:WRchTxt7-u7q,topToTop:18,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt7-u7q:[&@slashn{distance:10,locked:true,originalValue:395,targetComponent:WRchTxt8-jkf,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt8-jkf:[&@slashn{distance:10,locked:true,originalValue:414,targetComponent:WRchTxt9-gzk,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt9-gzk:[&@slashn{distance:10,locked:true,originalValue:433,targetComponent:WRchTxta-kt0,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxta-kt0:[&@slashn{distance:10,locked:true,originalValue:450,targetComponent:WRchTxtb-10oh,topToTop:17,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxtb-10oh:[&@slashn{distance:14,locked:true,originalValue:464,targetComponent:WPht0-129u,topToTop:14,type:TOP_TOP}&@slashn{distance:120,locked:false,originalValue:600,targetComponent:WRchTxtc-qml,topToTop:150,type:BOTTOM_TOP}&@slashn]&@slashn---WPht0-129u:[&@slashn{distance:10,locked:true,originalValue:600,targetComponent:WRchTxtc-qml,topToTop:136,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxtc-qml:[&@slashn{distance:10,locked:true,originalValue:617,targetComponent:WPht1-1oq,topToTop:17,type:BOTTOM_TOP}&@slashn]&@slashn---WPht1-1oq:[&@slashn{distance:10,locked:true,originalValue:767,targetComponent:WPht2-btb,topToTop:150,type:BOTTOM_TOP}&@slashn]&@slashn---WPht2-btb:[&@slashn{distance:10,locked:true,originalValue:1127,targetComponent:WRchTxte-i7u,topToTop:360,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxte-i7u:[&@slashn{distance:10,locked:true,originalValue:1143,targetComponent:WRchTxt6-8vj,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt6-8vj:[&@slashn{distance:10,locked:true,originalValue:1159,targetComponent:WPht3-6vv,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn---WPht3-6vv:[&@slashn{distance:10,locked:true,originalValue:1439,targetComponent:mainPage,topToTop:1159,type:BOTTOM_PARENT}&@slashn]&@slashn","masterPage":"---SITE_FOOTER:[&@slashn{distance:10,locked:true,originalValue:500,targetComponent:SITE_STRUCTURE,topToTop:500,type:BOTTOM_PARENT}&@slashn]&@slashn---SITE_HEADER:[&@slashn{distance:10,locked:true,originalValue:61,targetComponent:PAGES_CONTAINER,topToTop:51,type:BOTTOM_TOP}&@slashn]&@slashn------TINY_MENU:[&@slashn{distance:0,locked:true,originalValue:41,targetComponent:SITE_HEADER,topToTop:10,type:BOTTOM_PARENT}&@slashn]&@slashn---PAGES_CONTAINER:[&@slashn{distance:10,locked:true,originalValue:2056,targetComponent:SITE_FOOTER,topToTop:1995,type:BOTTOM_TOP}&@slashn]&@slashn------SITE_PAGES:[&@slashn{distance:0,locked:true,originalValue:1985,targetComponent:PAGES_CONTAINER,topToTop:0,type:BOTTOM_PARENT}&@slashn]&@slashn"}}';
                                    var expectedMobileSiteResults = '{"pageToComponentIdList":{"mainPage":["mainPage","WRchTxt0-14gi","WRchTxt1-3kq","WRchTxt2-i0x","WRchTxt3-1c16","WRchTxt5-9no","WRchTxt4-qfg","WRchTxt6-1662","WRchTxt7-qap","WRchTxt8-foc","WRchTxt0-96k","WRchTxt1-wvp","WRchTxt2-10tf","WRchTxt3-1cdi","WRchTxt4-4c6","WRchTxt5-3ps","WRchTxt6-7jg","WRchTxt7-u7q","WRchTxt8-jkf","WRchTxt9-gzk","WRchTxta-kt0","WRchTxtb-10oh","WPht0-129u","WRchTxtc-qml","WPht1-1oq","WPht2-btb","WRchTxte-i7u","WRchTxt6-8vj","WPht3-6vv"],"masterPage":["SITE_FOOTER","WRchTxt1-6wd","WPht3-18c3","WRchTxt3-s1p","WPht4-w8m","SITE_HEADER","WRchTxt0-cks","WPht2-11if","WRchTxt6-z98","WPht7-r9t","TINY_MENU","PAGES_CONTAINER","SITE_PAGES"]},"pageToStructureSkeleton":{"mainPage":"mainPage:{&@slashn---WRchTxt0-14gi,&@slashn---WRchTxt1-3kq,&@slashn---WRchTxt2-i0x,&@slashn---WRchTxt3-1c16,&@slashn---WRchTxt5-9no,&@slashn---WRchTxt4-qfg,&@slashn---WRchTxt6-1662,&@slashn---WRchTxt7-qap,&@slashn---WRchTxt8-foc,&@slashn---WRchTxt0-96k,&@slashn---WRchTxt1-wvp,&@slashn---WRchTxt2-10tf,&@slashn---WRchTxt3-1cdi,&@slashn---WRchTxt4-4c6,&@slashn---WRchTxt5-3ps,&@slashn---WRchTxt6-7jg,&@slashn---WRchTxt7-u7q,&@slashn---WRchTxt8-jkf,&@slashn---WRchTxt9-gzk,&@slashn---WRchTxta-kt0,&@slashn---WRchTxtb-10oh,&@slashn---WPht0-129u,&@slashn---WRchTxtc-qml,&@slashn---WPht1-1oq,&@slashn---WPht2-btb,&@slashn---WRchTxte-i7u,&@slashn---WRchTxt6-8vj,&@slashn---WPht3-6vv&@slashn}&@slashn","masterPage":"ROOT:{&@slashn---SITE_FOOTER:{&@slashn------WRchTxt1-6wd,&@slashn------WPht3-18c3,&@slashn------WRchTxt3-s1p,&@slashn------WPht4-w8m&@slashn---}&@slashn,&@slashn---SITE_HEADER:{&@slashn------WRchTxt0-cks,&@slashn------WPht2-11if,&@slashn------WRchTxt6-z98,&@slashn------WPht7-r9t,&@slashn------TINY_MENU&@slashn---}&@slashn,&@slashn---PAGES_CONTAINER:{&@slashn------SITE_PAGES&@slashn---}&@slashn&@slashn}&@slashn"},"pageToLayoutDetails":{"mainPage":"mainPage:{x:0,y:0,width:320,height:2125}&@slashn---WRchTxt0-14gi:{x:20,y:10,width:280,height:84}&@slashn---WRchTxt1-3kq:{x:20,y:104,width:280,height:20}&@slashn---WRchTxt2-i0x:{x:20,y:134,width:280,height:60}&@slashn---WRchTxt3-1c16:{x:20,y:204,width:280,height:20}&@slashn---WRchTxt5-9no:{x:96,y:234,width:127,height:100}&@slashn---WRchTxt4-qfg:{x:20,y:344,width:280,height:40}&@slashn---WRchTxt6-1662:{x:20,y:394,width:280,height:36}&@slashn---WRchTxt7-qap:{x:20,y:440,width:280,height:56}&@slashn---WRchTxt8-foc:{x:56,y:506,width:54,height:20}&@slashn---WRchTxt0-96k:{x:146,y:506,width:117,height:20}&@slashn---WRchTxt1-wvp:{x:106,y:536,width:107,height:20}&@slashn---WRchTxt2-10tf:{x:20,y:566,width:280,height:40}&@slashn---WRchTxt3-1cdi:{x:20,y:616,width:280,height:40}&@slashn---WRchTxt4-4c6:{x:20,y:666,width:280,height:40}&@slashn---WRchTxt5-3ps:{x:20,y:716,width:280,height:20}&@slashn---WRchTxt6-7jg:{x:20,y:746,width:280,height:40}&@slashn---WRchTxt7-u7q:{x:20,y:796,width:280,height:40}&@slashn---WRchTxt8-jkf:{x:20,y:846,width:280,height:40}&@slashn---WRchTxt9-gzk:{x:20,y:896,width:280,height:40}&@slashn---WRchTxta-kt0:{x:20,y:946,width:280,height:90}&@slashn---WRchTxtb-10oh:{x:20,y:1046,width:196,height:30}&@slashn---WPht0-129u:{x:47,y:1060,width:253,height:126}&@slashn---WRchTxtc-qml:{x:20,y:1196,width:280,height:33}&@slashn---WPht1-1oq:{x:20,y:1239,width:280,height:140}&@slashn---WPht2-btb:{x:115,y:1389,width:90,height:350}&@slashn---WRchTxte-i7u:{x:20,y:1749,width:280,height:33}&@slashn---WRchTxt6-8vj:{x:20,y:1792,width:280,height:33}&@slashn---WPht3-6vv:{x:120,y:1835,width:80,height:270}&@slashn","masterPage":"---SITE_FOOTER:{x:0,y:2500,width:320,height:303}&@slashn------WRchTxt1-6wd:{x:20,y:10,width:280,height:37}&@slashn------WPht3-18c3:{x:20,y:57,width:280,height:105}&@slashn------WRchTxt3-s1p:{x:20,y:172,width:109,height:29}&@slashn------WPht4-w8m:{x:20,y:188,width:280,height:105}&@slashn---SITE_HEADER:{x:0,y:10,width:320,height:345}&@slashn------WRchTxt0-cks:{x:20,y:10,width:210,height:37}&@slashn------WPht2-11if:{x:20,y:101,width:280,height:105}&@slashn------WRchTxt6-z98:{x:41,y:216,width:118,height:29}&@slashn------WPht7-r9t:{x:20,y:230,width:280,height:105}&@slashn------TINY_MENU:{x:250,y:10,width:50,height:50}&@slashn---PAGES_CONTAINER:{x:0,y:365,width:320,height:2125}&@slashn------SITE_PAGES:{x:0,y:0,width:320,height:2125}&@slashn"},"pageToAnchors":{"mainPage":"mainPage:[&@slashn]&@slashn---WRchTxt0-14gi:[&@slashn{distance:10,locked:true,originalValue:22,targetComponent:WRchTxt1-3kq,topToTop:12,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt1-3kq:[&@slashn{distance:10,locked:true,originalValue:40,targetComponent:WRchTxt2-i0x,topToTop:18,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt2-i0x:[&@slashn{distance:10,locked:true,originalValue:59,targetComponent:WRchTxt3-1c16,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt3-1c16:[&@slashn{distance:10,locked:true,originalValue:77,targetComponent:WRchTxt5-9no,topToTop:18,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt5-9no:[&@slashn{distance:10,locked:true,originalValue:182,targetComponent:WRchTxt4-qfg,topToTop:105,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt4-qfg:[&@slashn{distance:10,locked:true,originalValue:199,targetComponent:WRchTxt6-1662,topToTop:17,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt6-1662:[&@slashn{distance:10,locked:true,originalValue:215,targetComponent:WRchTxt7-qap,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt7-qap:[&@slashn{distance:10,locked:true,originalValue:230,targetComponent:WRchTxt8-foc,topToTop:15,type:BOTTOM_TOP}&@slashn{distance:10,locked:true,originalValue:230,targetComponent:WRchTxt0-96k,topToTop:15,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt8-foc:[&@slashn{distance:10,locked:true,originalValue:259,targetComponent:WRchTxt1-wvp,topToTop:29,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt0-96k:[&@slashn{distance:10,locked:true,originalValue:259,targetComponent:WRchTxt1-wvp,topToTop:29,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt1-wvp:[&@slashn{distance:10,locked:true,originalValue:288,targetComponent:WRchTxt2-10tf,topToTop:29,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt2-10tf:[&@slashn{distance:10,locked:true,originalValue:304,targetComponent:WRchTxt3-1cdi,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt3-1cdi:[&@slashn{distance:10,locked:true,originalValue:323,targetComponent:WRchTxt4-4c6,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt4-4c6:[&@slashn{distance:10,locked:true,originalValue:340,targetComponent:WRchTxt5-3ps,topToTop:17,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt5-3ps:[&@slashn{distance:10,locked:true,originalValue:358,targetComponent:WRchTxt6-7jg,topToTop:18,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt6-7jg:[&@slashn{distance:10,locked:true,originalValue:376,targetComponent:WRchTxt7-u7q,topToTop:18,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt7-u7q:[&@slashn{distance:10,locked:true,originalValue:395,targetComponent:WRchTxt8-jkf,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt8-jkf:[&@slashn{distance:10,locked:true,originalValue:414,targetComponent:WRchTxt9-gzk,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt9-gzk:[&@slashn{distance:10,locked:true,originalValue:433,targetComponent:WRchTxta-kt0,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxta-kt0:[&@slashn{distance:10,locked:true,originalValue:450,targetComponent:WRchTxtb-10oh,topToTop:17,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxtb-10oh:[&@slashn{distance:14,locked:true,originalValue:464,targetComponent:WPht0-129u,topToTop:14,type:TOP_TOP}&@slashn{distance:120,locked:false,originalValue:600,targetComponent:WRchTxtc-qml,topToTop:150,type:BOTTOM_TOP}&@slashn]&@slashn---WPht0-129u:[&@slashn{distance:10,locked:true,originalValue:600,targetComponent:WRchTxtc-qml,topToTop:136,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxtc-qml:[&@slashn{distance:10,locked:true,originalValue:617,targetComponent:WPht1-1oq,topToTop:17,type:BOTTOM_TOP}&@slashn]&@slashn---WPht1-1oq:[&@slashn{distance:10,locked:true,originalValue:767,targetComponent:WPht2-btb,topToTop:150,type:BOTTOM_TOP}&@slashn]&@slashn---WPht2-btb:[&@slashn{distance:10,locked:true,originalValue:1127,targetComponent:WRchTxte-i7u,topToTop:360,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxte-i7u:[&@slashn{distance:10,locked:true,originalValue:1143,targetComponent:WRchTxt6-8vj,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt6-8vj:[&@slashn{distance:10,locked:true,originalValue:1159,targetComponent:WPht3-6vv,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn---WPht3-6vv:[&@slashn{distance:10,locked:true,originalValue:1439,targetComponent:mainPage,topToTop:1159,type:BOTTOM_PARENT}&@slashn]&@slashn","masterPage":"---SITE_FOOTER:[&@slashn{distance:10,locked:true,originalValue:500,targetComponent:SITE_STRUCTURE,topToTop:500,type:BOTTOM_PARENT}&@slashn]&@slashn------WRchTxt1-6wd:[&@slashn{distance:10,locked:true,originalValue:29,targetComponent:WPht3-18c3,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn------WPht3-18c3:[&@slashn{distance:10,locked:true,originalValue:144,targetComponent:WRchTxt3-s1p,topToTop:115,type:BOTTOM_TOP}&@slashn]&@slashn------WRchTxt3-s1p:[&@slashn{distance:-13,locked:true,originalValue:160,targetComponent:WPht4-w8m,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn------WPht4-w8m:[&@slashn{distance:10,locked:true,originalValue:275,targetComponent:SITE_FOOTER,topToTop:160,type:BOTTOM_PARENT}&@slashn]&@slashn---SITE_HEADER:[&@slashn{distance:10,locked:true,originalValue:334,targetComponent:PAGES_CONTAINER,topToTop:324,type:BOTTOM_TOP}&@slashn]&@slashn------WRchTxt0-cks:[&@slashn{distance:54,locked:true,originalValue:70,targetComponent:WPht2-11if,topToTop:60,type:BOTTOM_TOP}&@slashn]&@slashn------WPht2-11if:[&@slashn{distance:10,locked:true,originalValue:185,targetComponent:WRchTxt6-z98,topToTop:115,type:BOTTOM_TOP}&@slashn]&@slashn------WRchTxt6-z98:[&@slashn{distance:14,locked:true,originalValue:199,targetComponent:WPht7-r9t,topToTop:14,type:TOP_TOP}&@slashn{distance:100,locked:false,originalValue:314,targetComponent:SITE_HEADER,topToTop:185,type:BOTTOM_PARENT}&@slashn]&@slashn------WPht7-r9t:[&@slashn{distance:10,locked:true,originalValue:314,targetComponent:SITE_HEADER,topToTop:199,type:BOTTOM_PARENT}&@slashn]&@slashn------TINY_MENU:[&@slashn{distance:10,locked:true,originalValue:70,targetComponent:WPht2-11if,topToTop:60,type:BOTTOM_TOP}&@slashn]&@slashn---PAGES_CONTAINER:[&@slashn{distance:10,locked:true,originalValue:2329,targetComponent:SITE_FOOTER,topToTop:1995,type:BOTTOM_TOP}&@slashn]&@slashn------SITE_PAGES:[&@slashn{distance:0,locked:true,originalValue:1985,targetComponent:PAGES_CONTAINER,topToTop:0,type:BOTTOM_PARENT}&@slashn]&@slashn"}}';
                                    window.structureComparisonDriver.testPage('mainPage', expectedMobileSiteResults);
                                });
                            });
                        });
                    }); //it

                    //PASS
                    it('+ after scroll down before regenerate', function() {
                        window.mobileEditorUIDriver.switchToMobileEditor(function(){
                            window.scrollTo(0,1500);
                            window.mobileEditorUIDriver.sleep(200, function(){
                                window.mobileEditorUIDriver.regenerateWholeMobileStructureLayout(function(){
                                    window.mobileEditorUIDriver.sleep(200, function(){
//                                        var expectedMobileSiteResults = '{"pageToComponentIdList":{"mainPage":["mainPage","WRchTxt0-14gi","WRchTxt1-3kq","WRchTxt2-i0x","WRchTxt3-1c16","WRchTxt5-9no","WRchTxt4-qfg","WRchTxt6-1662","WRchTxt7-qap","WRchTxt8-foc","WRchTxt0-96k","WRchTxt1-wvp","WRchTxt2-10tf","WRchTxt3-1cdi","WRchTxt4-4c6","WRchTxt5-3ps","WRchTxt6-7jg","WRchTxt7-u7q","WRchTxt8-jkf","WRchTxt9-gzk","WRchTxta-kt0","WRchTxtb-10oh","WPht0-129u","WRchTxtc-qml","WPht1-1oq","WPht2-btb","WRchTxte-i7u","WRchTxt6-8vj","WPht3-6vv"],"masterPage":["SITE_FOOTER","SITE_HEADER","TINY_MENU","PAGES_CONTAINER","SITE_PAGES"]},"pageToStructureSkeleton":{"mainPage":"mainPage:{&@slashn---WRchTxt0-14gi,&@slashn---WRchTxt1-3kq,&@slashn---WRchTxt2-i0x,&@slashn---WRchTxt3-1c16,&@slashn---WRchTxt5-9no,&@slashn---WRchTxt4-qfg,&@slashn---WRchTxt6-1662,&@slashn---WRchTxt7-qap,&@slashn---WRchTxt8-foc,&@slashn---WRchTxt0-96k,&@slashn---WRchTxt1-wvp,&@slashn---WRchTxt2-10tf,&@slashn---WRchTxt3-1cdi,&@slashn---WRchTxt4-4c6,&@slashn---WRchTxt5-3ps,&@slashn---WRchTxt6-7jg,&@slashn---WRchTxt7-u7q,&@slashn---WRchTxt8-jkf,&@slashn---WRchTxt9-gzk,&@slashn---WRchTxta-kt0,&@slashn---WRchTxtb-10oh,&@slashn---WPht0-129u,&@slashn---WRchTxtc-qml,&@slashn---WPht1-1oq,&@slashn---WPht2-btb,&@slashn---WRchTxte-i7u,&@slashn---WRchTxt6-8vj,&@slashn---WPht3-6vv&@slashn}&@slashn","masterPage":"ROOT:{&@slashn---SITE_FOOTER,&@slashn---SITE_HEADER:{&@slashn------TINY_MENU&@slashn---}&@slashn,&@slashn---PAGES_CONTAINER:{&@slashn------SITE_PAGES&@slashn---}&@slashn&@slashn}&@slashn"},"pageToLayoutDetails":{"mainPage":"mainPage:{x:0,y:0,width:320,height:2125}&@slashn---WRchTxt0-14gi:{x:20,y:10,width:280,height:5}&@slashn---WRchTxt1-3kq:{x:20,y:104,width:280,height:8}&@slashn---WRchTxt2-i0x:{x:20,y:134,width:280,height:9}&@slashn---WRchTxt3-1c16:{x:20,y:204,width:280,height:8}&@slashn---WRchTxt5-9no:{x:96,y:234,width:127,height:95}&@slashn---WRchTxt4-qfg:{x:20,y:344,width:280,height:7}&@slashn---WRchTxt6-1662:{x:20,y:394,width:280,height:6}&@slashn---WRchTxt7-qap:{x:20,y:440,width:280,height:5}&@slashn---WRchTxt8-foc:{x:56,y:506,width:54,height:19}&@slashn---WRchTxt0-96k:{x:146,y:506,width:117,height:19}&@slashn---WRchTxt1-wvp:{x:106,y:536,width:107,height:19}&@slashn---WRchTxt2-10tf:{x:20,y:566,width:280,height:6}&@slashn---WRchTxt3-1cdi:{x:20,y:616,width:280,height:9}&@slashn---WRchTxt4-4c6:{x:20,y:666,width:280,height:7}&@slashn---WRchTxt5-3ps:{x:20,y:716,width:280,height:8}&@slashn---WRchTxt6-7jg:{x:20,y:746,width:280,height:8}&@slashn---WRchTxt7-u7q:{x:20,y:796,width:280,height:9}&@slashn---WRchTxt8-jkf:{x:20,y:846,width:280,height:9}&@slashn---WRchTxt9-gzk:{x:20,y:896,width:280,height:9}&@slashn---WRchTxta-kt0:{x:20,y:946,width:280,height:7}&@slashn---WRchTxtb-10oh:{x:20,y:1046,width:196,height:30}&@slashn---WPht0-129u:{x:47,y:1060,width:253,height:126}&@slashn---WRchTxtc-qml:{x:20,y:1196,width:280,height:7}&@slashn---WPht1-1oq:{x:20,y:1239,width:280,height:140}&@slashn---WPht2-btb:{x:115,y:1389,width:90,height:350}&@slashn---WRchTxte-i7u:{x:20,y:1749,width:280,height:6}&@slashn---WRchTxt6-8vj:{x:20,y:1792,width:280,height:6}&@slashn---WPht3-6vv:{x:120,y:1835,width:80,height:270}&@slashn","masterPage":"---SITE_FOOTER:{x:0,y:2215,width:320,height:55}&@slashn---SITE_HEADER:{x:0,y:10,width:320,height:60}&@slashn------TINY_MENU:{x:250,y:10,width:50,height:50}&@slashn---PAGES_CONTAINER:{x:0,y:80,width:320,height:2125}&@slashn------SITE_PAGES:{x:0,y:0,width:320,height:2125}&@slashn"},"pageToAnchors":{"mainPage":"mainPage:[&@slashn]&@slashn---WRchTxt0-14gi:[&@slashn{distance:10,locked:true,originalValue:22,targetComponent:WRchTxt1-3kq,topToTop:12,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt1-3kq:[&@slashn{distance:10,locked:true,originalValue:40,targetComponent:WRchTxt2-i0x,topToTop:18,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt2-i0x:[&@slashn{distance:10,locked:true,originalValue:59,targetComponent:WRchTxt3-1c16,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt3-1c16:[&@slashn{distance:10,locked:true,originalValue:77,targetComponent:WRchTxt5-9no,topToTop:18,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt5-9no:[&@slashn{distance:10,locked:true,originalValue:182,targetComponent:WRchTxt4-qfg,topToTop:105,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt4-qfg:[&@slashn{distance:10,locked:true,originalValue:199,targetComponent:WRchTxt6-1662,topToTop:17,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt6-1662:[&@slashn{distance:10,locked:true,originalValue:215,targetComponent:WRchTxt7-qap,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt7-qap:[&@slashn{distance:10,locked:true,originalValue:230,targetComponent:WRchTxt8-foc,topToTop:15,type:BOTTOM_TOP}&@slashn{distance:10,locked:true,originalValue:230,targetComponent:WRchTxt0-96k,topToTop:15,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt8-foc:[&@slashn{distance:10,locked:true,originalValue:259,targetComponent:WRchTxt1-wvp,topToTop:29,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt0-96k:[&@slashn{distance:10,locked:true,originalValue:259,targetComponent:WRchTxt1-wvp,topToTop:29,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt1-wvp:[&@slashn{distance:10,locked:true,originalValue:288,targetComponent:WRchTxt2-10tf,topToTop:29,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt2-10tf:[&@slashn{distance:10,locked:true,originalValue:304,targetComponent:WRchTxt3-1cdi,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt3-1cdi:[&@slashn{distance:10,locked:true,originalValue:323,targetComponent:WRchTxt4-4c6,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt4-4c6:[&@slashn{distance:10,locked:true,originalValue:340,targetComponent:WRchTxt5-3ps,topToTop:17,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt5-3ps:[&@slashn{distance:10,locked:true,originalValue:358,targetComponent:WRchTxt6-7jg,topToTop:18,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt6-7jg:[&@slashn{distance:10,locked:true,originalValue:376,targetComponent:WRchTxt7-u7q,topToTop:18,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt7-u7q:[&@slashn{distance:10,locked:true,originalValue:395,targetComponent:WRchTxt8-jkf,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt8-jkf:[&@slashn{distance:10,locked:true,originalValue:414,targetComponent:WRchTxt9-gzk,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt9-gzk:[&@slashn{distance:10,locked:true,originalValue:433,targetComponent:WRchTxta-kt0,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxta-kt0:[&@slashn{distance:10,locked:true,originalValue:450,targetComponent:WRchTxtb-10oh,topToTop:17,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxtb-10oh:[&@slashn{distance:14,locked:true,originalValue:464,targetComponent:WPht0-129u,topToTop:14,type:TOP_TOP}&@slashn{distance:120,locked:false,originalValue:600,targetComponent:WRchTxtc-qml,topToTop:150,type:BOTTOM_TOP}&@slashn]&@slashn---WPht0-129u:[&@slashn{distance:10,locked:true,originalValue:600,targetComponent:WRchTxtc-qml,topToTop:136,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxtc-qml:[&@slashn{distance:10,locked:true,originalValue:617,targetComponent:WPht1-1oq,topToTop:17,type:BOTTOM_TOP}&@slashn]&@slashn---WPht1-1oq:[&@slashn{distance:10,locked:true,originalValue:767,targetComponent:WPht2-btb,topToTop:150,type:BOTTOM_TOP}&@slashn]&@slashn---WPht2-btb:[&@slashn{distance:10,locked:true,originalValue:1127,targetComponent:WRchTxte-i7u,topToTop:360,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxte-i7u:[&@slashn{distance:10,locked:true,originalValue:1143,targetComponent:WRchTxt6-8vj,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt6-8vj:[&@slashn{distance:10,locked:true,originalValue:1159,targetComponent:WPht3-6vv,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn---WPht3-6vv:[&@slashn{distance:10,locked:true,originalValue:1439,targetComponent:mainPage,topToTop:1159,type:BOTTOM_PARENT}&@slashn]&@slashn","masterPage":"---SITE_FOOTER:[&@slashn{distance:10,locked:true,originalValue:500,targetComponent:SITE_STRUCTURE,topToTop:500,type:BOTTOM_PARENT}&@slashn]&@slashn---SITE_HEADER:[&@slashn{distance:10,locked:true,originalValue:61,targetComponent:PAGES_CONTAINER,topToTop:51,type:BOTTOM_TOP}&@slashn]&@slashn------TINY_MENU:[&@slashn{distance:0,locked:true,originalValue:41,targetComponent:SITE_HEADER,topToTop:10,type:BOTTOM_PARENT}&@slashn]&@slashn---PAGES_CONTAINER:[&@slashn{distance:10,locked:true,originalValue:2056,targetComponent:SITE_FOOTER,topToTop:1995,type:BOTTOM_TOP}&@slashn]&@slashn------SITE_PAGES:[&@slashn{distance:0,locked:true,originalValue:1985,targetComponent:PAGES_CONTAINER,topToTop:0,type:BOTTOM_PARENT}&@slashn]&@slashn"}}';
                                        var expectedMobileSiteResults = '{"pageToComponentIdList":{"mainPage":["mainPage","WRchTxt0-14gi","WRchTxt1-3kq","WRchTxt2-i0x","WRchTxt3-1c16","WRchTxt5-9no","WRchTxt4-qfg","WRchTxt6-1662","WRchTxt7-qap","WRchTxt8-foc","WRchTxt0-96k","WRchTxt1-wvp","WRchTxt2-10tf","WRchTxt3-1cdi","WRchTxt4-4c6","WRchTxt5-3ps","WRchTxt6-7jg","WRchTxt7-u7q","WRchTxt8-jkf","WRchTxt9-gzk","WRchTxta-kt0","WRchTxtb-10oh","WPht0-129u","WRchTxtc-qml","WPht1-1oq","WPht2-btb","WRchTxte-i7u","WRchTxt6-8vj","WPht3-6vv"],"masterPage":["SITE_FOOTER","WRchTxt1-6wd","WPht3-18c3","WRchTxt3-s1p","WPht4-w8m","SITE_HEADER","WRchTxt0-cks","WPht2-11if","WRchTxt6-z98","WPht7-r9t","TINY_MENU","PAGES_CONTAINER","SITE_PAGES"]},"pageToStructureSkeleton":{"mainPage":"mainPage:{&@slashn---WRchTxt0-14gi,&@slashn---WRchTxt1-3kq,&@slashn---WRchTxt2-i0x,&@slashn---WRchTxt3-1c16,&@slashn---WRchTxt5-9no,&@slashn---WRchTxt4-qfg,&@slashn---WRchTxt6-1662,&@slashn---WRchTxt7-qap,&@slashn---WRchTxt8-foc,&@slashn---WRchTxt0-96k,&@slashn---WRchTxt1-wvp,&@slashn---WRchTxt2-10tf,&@slashn---WRchTxt3-1cdi,&@slashn---WRchTxt4-4c6,&@slashn---WRchTxt5-3ps,&@slashn---WRchTxt6-7jg,&@slashn---WRchTxt7-u7q,&@slashn---WRchTxt8-jkf,&@slashn---WRchTxt9-gzk,&@slashn---WRchTxta-kt0,&@slashn---WRchTxtb-10oh,&@slashn---WPht0-129u,&@slashn---WRchTxtc-qml,&@slashn---WPht1-1oq,&@slashn---WPht2-btb,&@slashn---WRchTxte-i7u,&@slashn---WRchTxt6-8vj,&@slashn---WPht3-6vv&@slashn}&@slashn","masterPage":"ROOT:{&@slashn---SITE_FOOTER:{&@slashn------WRchTxt1-6wd,&@slashn------WPht3-18c3,&@slashn------WRchTxt3-s1p,&@slashn------WPht4-w8m&@slashn---}&@slashn,&@slashn---SITE_HEADER:{&@slashn------WRchTxt0-cks,&@slashn------WPht2-11if,&@slashn------WRchTxt6-z98,&@slashn------WPht7-r9t,&@slashn------TINY_MENU&@slashn---}&@slashn,&@slashn---PAGES_CONTAINER:{&@slashn------SITE_PAGES&@slashn---}&@slashn&@slashn}&@slashn"},"pageToLayoutDetails":{"mainPage":"mainPage:{x:0,y:0,width:320,height:2125}&@slashn---WRchTxt0-14gi:{x:20,y:10,width:280,height:84}&@slashn---WRchTxt1-3kq:{x:20,y:104,width:280,height:20}&@slashn---WRchTxt2-i0x:{x:20,y:134,width:280,height:60}&@slashn---WRchTxt3-1c16:{x:20,y:204,width:280,height:20}&@slashn---WRchTxt5-9no:{x:96,y:234,width:127,height:100}&@slashn---WRchTxt4-qfg:{x:20,y:344,width:280,height:40}&@slashn---WRchTxt6-1662:{x:20,y:394,width:280,height:36}&@slashn---WRchTxt7-qap:{x:20,y:440,width:280,height:56}&@slashn---WRchTxt8-foc:{x:56,y:506,width:54,height:20}&@slashn---WRchTxt0-96k:{x:146,y:506,width:117,height:20}&@slashn---WRchTxt1-wvp:{x:106,y:536,width:107,height:20}&@slashn---WRchTxt2-10tf:{x:20,y:566,width:280,height:40}&@slashn---WRchTxt3-1cdi:{x:20,y:616,width:280,height:40}&@slashn---WRchTxt4-4c6:{x:20,y:666,width:280,height:40}&@slashn---WRchTxt5-3ps:{x:20,y:716,width:280,height:20}&@slashn---WRchTxt6-7jg:{x:20,y:746,width:280,height:40}&@slashn---WRchTxt7-u7q:{x:20,y:796,width:280,height:40}&@slashn---WRchTxt8-jkf:{x:20,y:846,width:280,height:40}&@slashn---WRchTxt9-gzk:{x:20,y:896,width:280,height:40}&@slashn---WRchTxta-kt0:{x:20,y:946,width:280,height:90}&@slashn---WRchTxtb-10oh:{x:20,y:1046,width:196,height:30}&@slashn---WPht0-129u:{x:47,y:1060,width:253,height:126}&@slashn---WRchTxtc-qml:{x:20,y:1196,width:280,height:33}&@slashn---WPht1-1oq:{x:20,y:1239,width:280,height:140}&@slashn---WPht2-btb:{x:115,y:1389,width:90,height:350}&@slashn---WRchTxte-i7u:{x:20,y:1749,width:280,height:33}&@slashn---WRchTxt6-8vj:{x:20,y:1792,width:280,height:33}&@slashn---WPht3-6vv:{x:120,y:1835,width:80,height:270}&@slashn","masterPage":"---SITE_FOOTER:{x:0,y:2500,width:320,height:303}&@slashn------WRchTxt1-6wd:{x:20,y:10,width:280,height:37}&@slashn------WPht3-18c3:{x:20,y:57,width:280,height:105}&@slashn------WRchTxt3-s1p:{x:20,y:172,width:109,height:29}&@slashn------WPht4-w8m:{x:20,y:188,width:280,height:105}&@slashn---SITE_HEADER:{x:0,y:10,width:320,height:345}&@slashn------WRchTxt0-cks:{x:20,y:10,width:210,height:37}&@slashn------WPht2-11if:{x:20,y:101,width:280,height:105}&@slashn------WRchTxt6-z98:{x:41,y:216,width:118,height:29}&@slashn------WPht7-r9t:{x:20,y:230,width:280,height:105}&@slashn------TINY_MENU:{x:250,y:10,width:50,height:50}&@slashn---PAGES_CONTAINER:{x:0,y:365,width:320,height:2125}&@slashn------SITE_PAGES:{x:0,y:0,width:320,height:2125}&@slashn"},"pageToAnchors":{"mainPage":"mainPage:[&@slashn]&@slashn---WRchTxt0-14gi:[&@slashn{distance:10,locked:true,originalValue:22,targetComponent:WRchTxt1-3kq,topToTop:12,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt1-3kq:[&@slashn{distance:10,locked:true,originalValue:40,targetComponent:WRchTxt2-i0x,topToTop:18,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt2-i0x:[&@slashn{distance:10,locked:true,originalValue:59,targetComponent:WRchTxt3-1c16,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt3-1c16:[&@slashn{distance:10,locked:true,originalValue:77,targetComponent:WRchTxt5-9no,topToTop:18,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt5-9no:[&@slashn{distance:10,locked:true,originalValue:182,targetComponent:WRchTxt4-qfg,topToTop:105,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt4-qfg:[&@slashn{distance:10,locked:true,originalValue:199,targetComponent:WRchTxt6-1662,topToTop:17,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt6-1662:[&@slashn{distance:10,locked:true,originalValue:215,targetComponent:WRchTxt7-qap,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt7-qap:[&@slashn{distance:10,locked:true,originalValue:230,targetComponent:WRchTxt8-foc,topToTop:15,type:BOTTOM_TOP}&@slashn{distance:10,locked:true,originalValue:230,targetComponent:WRchTxt0-96k,topToTop:15,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt8-foc:[&@slashn{distance:10,locked:true,originalValue:259,targetComponent:WRchTxt1-wvp,topToTop:29,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt0-96k:[&@slashn{distance:10,locked:true,originalValue:259,targetComponent:WRchTxt1-wvp,topToTop:29,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt1-wvp:[&@slashn{distance:10,locked:true,originalValue:288,targetComponent:WRchTxt2-10tf,topToTop:29,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt2-10tf:[&@slashn{distance:10,locked:true,originalValue:304,targetComponent:WRchTxt3-1cdi,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt3-1cdi:[&@slashn{distance:10,locked:true,originalValue:323,targetComponent:WRchTxt4-4c6,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt4-4c6:[&@slashn{distance:10,locked:true,originalValue:340,targetComponent:WRchTxt5-3ps,topToTop:17,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt5-3ps:[&@slashn{distance:10,locked:true,originalValue:358,targetComponent:WRchTxt6-7jg,topToTop:18,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt6-7jg:[&@slashn{distance:10,locked:true,originalValue:376,targetComponent:WRchTxt7-u7q,topToTop:18,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt7-u7q:[&@slashn{distance:10,locked:true,originalValue:395,targetComponent:WRchTxt8-jkf,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt8-jkf:[&@slashn{distance:10,locked:true,originalValue:414,targetComponent:WRchTxt9-gzk,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt9-gzk:[&@slashn{distance:10,locked:true,originalValue:433,targetComponent:WRchTxta-kt0,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxta-kt0:[&@slashn{distance:10,locked:true,originalValue:450,targetComponent:WRchTxtb-10oh,topToTop:17,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxtb-10oh:[&@slashn{distance:14,locked:true,originalValue:464,targetComponent:WPht0-129u,topToTop:14,type:TOP_TOP}&@slashn{distance:120,locked:false,originalValue:600,targetComponent:WRchTxtc-qml,topToTop:150,type:BOTTOM_TOP}&@slashn]&@slashn---WPht0-129u:[&@slashn{distance:10,locked:true,originalValue:600,targetComponent:WRchTxtc-qml,topToTop:136,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxtc-qml:[&@slashn{distance:10,locked:true,originalValue:617,targetComponent:WPht1-1oq,topToTop:17,type:BOTTOM_TOP}&@slashn]&@slashn---WPht1-1oq:[&@slashn{distance:10,locked:true,originalValue:767,targetComponent:WPht2-btb,topToTop:150,type:BOTTOM_TOP}&@slashn]&@slashn---WPht2-btb:[&@slashn{distance:10,locked:true,originalValue:1127,targetComponent:WRchTxte-i7u,topToTop:360,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxte-i7u:[&@slashn{distance:10,locked:true,originalValue:1143,targetComponent:WRchTxt6-8vj,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn---WRchTxt6-8vj:[&@slashn{distance:10,locked:true,originalValue:1159,targetComponent:WPht3-6vv,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn---WPht3-6vv:[&@slashn{distance:10,locked:true,originalValue:1439,targetComponent:mainPage,topToTop:1159,type:BOTTOM_PARENT}&@slashn]&@slashn","masterPage":"---SITE_FOOTER:[&@slashn{distance:10,locked:true,originalValue:500,targetComponent:SITE_STRUCTURE,topToTop:500,type:BOTTOM_PARENT}&@slashn]&@slashn------WRchTxt1-6wd:[&@slashn{distance:10,locked:true,originalValue:29,targetComponent:WPht3-18c3,topToTop:19,type:BOTTOM_TOP}&@slashn]&@slashn------WPht3-18c3:[&@slashn{distance:10,locked:true,originalValue:144,targetComponent:WRchTxt3-s1p,topToTop:115,type:BOTTOM_TOP}&@slashn]&@slashn------WRchTxt3-s1p:[&@slashn{distance:-13,locked:true,originalValue:160,targetComponent:WPht4-w8m,topToTop:16,type:BOTTOM_TOP}&@slashn]&@slashn------WPht4-w8m:[&@slashn{distance:10,locked:true,originalValue:275,targetComponent:SITE_FOOTER,topToTop:160,type:BOTTOM_PARENT}&@slashn]&@slashn---SITE_HEADER:[&@slashn{distance:10,locked:true,originalValue:334,targetComponent:PAGES_CONTAINER,topToTop:324,type:BOTTOM_TOP}&@slashn]&@slashn------WRchTxt0-cks:[&@slashn{distance:54,locked:true,originalValue:70,targetComponent:WPht2-11if,topToTop:60,type:BOTTOM_TOP}&@slashn]&@slashn------WPht2-11if:[&@slashn{distance:10,locked:true,originalValue:185,targetComponent:WRchTxt6-z98,topToTop:115,type:BOTTOM_TOP}&@slashn]&@slashn------WRchTxt6-z98:[&@slashn{distance:14,locked:true,originalValue:199,targetComponent:WPht7-r9t,topToTop:14,type:TOP_TOP}&@slashn{distance:100,locked:false,originalValue:314,targetComponent:SITE_HEADER,topToTop:185,type:BOTTOM_PARENT}&@slashn]&@slashn------WPht7-r9t:[&@slashn{distance:10,locked:true,originalValue:314,targetComponent:SITE_HEADER,topToTop:199,type:BOTTOM_PARENT}&@slashn]&@slashn------TINY_MENU:[&@slashn{distance:10,locked:true,originalValue:70,targetComponent:WPht2-11if,topToTop:60,type:BOTTOM_TOP}&@slashn]&@slashn---PAGES_CONTAINER:[&@slashn{distance:10,locked:true,originalValue:2329,targetComponent:SITE_FOOTER,topToTop:1995,type:BOTTOM_TOP}&@slashn]&@slashn------SITE_PAGES:[&@slashn{distance:0,locked:true,originalValue:1985,targetComponent:PAGES_CONTAINER,topToTop:0,type:BOTTOM_PARENT}&@slashn]&@slashn"}}';
                                        window.structureComparisonDriver.testPage('mainPage', expectedMobileSiteResults);
                                    });
                                });
                            });
                        });
                    }); //it

                }); //describe


                describe('Calculation of effective text layout of varying text components ', function(){

                    beforeEach(function(){

                        //TODO - there is a problem with text with bullets - e.g component #16 ('WRchTxt6-7jg') is calculated without the bullets area. This might cause a bug
                        var expectedPageComponentTextBordersStringified = '{"WRchTxte-i7u":{"x":730,"y":1410,"width":216,"height":33},"WRchTxt6-8vj":{"x":45,"y":1720,"width":213,"height":33},"WRchTxtc-qml":{"x":45,"y":1265,"width":201,"height":33},"WRchTxt9-gzk":{"x":40,"y":1105,"width":141,"height":76},"WRchTxta-kt0":{"x":345,"y":1116,"width":204,"height":61},"WRchTxtb-10oh":{"x":635,"y":1080,"width":207,"height":33},"WRchTxt8-jkf":{"x":585,"y":960,"width":141,"height":57},"WRchTxt7-u7q":{"x":305,"y":960,"width":145,"height":38},"WRchTxt6-7jg":{"x":65,"y":980,"width":160,"height":57},"WRchTxt3-1cdi":{"x":56,"y":820,"width":154,"height":38},"WRchTxt4-4c6":{"x":350,"y":800,"width":186,"height":38},"WRchTxt5-3ps":{"x":699,"y":810,"width":172,"height":19},"WRchTxt2-10tf":{"x":733,"y":615,"width":213,"height":38},"WRchTxt1-wvp":{"x":409,"y":610,"width":102,"height":19},"WRchTxt0-96k":{"x":92,"y":620,"width":112,"height":19},"WRchTxt8-foc":{"x":755,"y":500,"width":52,"height":19},"WRchTxt7-qap":{"x":160,"y":455,"width":276,"height":55},"WRchTxt4-qfg":{"x":350,"y":320,"width":191,"height":38},"WRchTxt6-1662":{"x":685,"y":330,"width":225,"height":36},"WRchTxt5-9no":{"x":680,"y":135,"width":121,"height":95},"WRchTxt3-1c16":{"x":385,"y":180,"width":161,"height":19},"WRchTxt2-i0x":{"x":75,"y":150,"width":149,"height":76},"WRchTxt0-14gi":{"x":25,"y":20,"width":627,"height":56},"WRchTxt1-3kq":{"x":790,"y":30,"width":173,"height":19}}';
                        this.testConfigParams.expectedPageComponentTextBorders = JSON.parse(expectedPageComponentTextBordersStringified);

                        this.testPageComponentTextBorders = function() {
                            var calculatedPageComponentTextBorders = window.structureComparisonDriver.getPageComponentsTextBorders(Constants.ViewerTypesParams.TYPES.DESKTOP, 'mainPage');
                            for (var i=0; i< _.keys(calculatedPageComponentTextBorders).length; i++) {
                                var curCompId = _.keys(calculatedPageComponentTextBorders)[i];
                                expect(JSON.stringify(calculatedPageComponentTextBorders[curCompId])).toBe(JSON.stringify(this.testConfigParams.expectedPageComponentTextBorders[curCompId]));
                            }
                        };

                    });

                    it("+ not an actual test, just preparing the environment for this section's test",function() {
                        this.deleteAllPageComponentsAndReaddTextComponents();
                    });



                    //PASS
                    it("+ when in the desktop editor, in the mainPage", function() {
                        this.testPageComponentTextBorders();
                    }); //it


                    //PASS
                    it("+ when in the desktop editor, in the mainPage, scrollY=1500", function() {
                        window.scrollTo(0,1500);
                        window.mobileEditorUIDriver.sleep(200, function(){
                            this.testPageComponentTextBorders();
                        });
                    }); //it


                    //PASS
                    it("+ when in the mobile editor", function() {
                        window.mobileEditorUIDriver.switchToMobileEditor(function(){
                            this.testPageComponentTextBorders();
                            window.mobileEditorUIDriver.switchToDesktopEditor();
                        });
                    }); //it

                    //PASS
                    it("+ when in the mobile editor, scrollY=1500", function() {
                        window.mobileEditorUIDriver.switchToMobileEditor(function(){
                            window.scrollTo(0,1500);
                            window.mobileEditorUIDriver.sleep(200, function(){
                                this.testPageComponentTextBorders();
                                window.mobileEditorUIDriver.switchToDesktopEditor();
                            });
                        });
                    }); //it

                    it("+ when in the desktop editor, in a different page", function() {
                        window.mobileEditorUIDriver.addBlankPageAsync();
                        window.mobileEditorUIDriver.sleep(2000, function(){
                            this.testPageComponentTextBorders();
                            window.mobileEditorUIDriver.deleteCurrentPageAsync();
                            window.mobileEditorUIDriver.sleep(500, function(){});
                        });

                    }); //it


                }); //describe



            }); //describe


        }); //describe
    });


});
